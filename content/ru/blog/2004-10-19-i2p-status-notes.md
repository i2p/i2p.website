---
title: "Заметки о состоянии I2P на 2004-10-19"
date: 2004-10-19
author: "jr"
description: "Еженедельное обновление статуса I2P, включающее выпуск 0.4.1.3, улучшения производительности tunnel, прогресс Streaming library (библиотеки потоковой передачи) и поисковую систему files.i2p"
categories: ["status"]
---

Всем привет, снова вторник

## Указатель

1. 0.4.1.3
2. Tunnel test time, and send processing time
3. Streaming lib
4. files.i2p
5. ???

## 1) 0.4.1.3

Релиз 0.4.1.3 вышел день‑другой назад, и похоже, что большинство уже обновились (спасибо!). Сеть работает довольно хорошо, но революционного роста надёжности по‑прежнему нет. Однако ошибки watchdog (механизма сторожевого таймера) из 0.4.1.2 исчезли (или, по крайней мере, о них никто не сообщал). Я рассчитываю, что этот релиз 0.4.1.3 будет последним патчем перед 0.4.2, хотя, конечно, если всплывёт что‑то серьёзное, требующее исправления, мы выпустим ещё один.

## 2) Время теста tunnel и время обработки отправки

Наиболее существенные изменения в релизе 0.4.1.3 коснулись тестирования tunnel — вместо фиксированного (30 секунд!) периода тестирования мы используем гораздо более агрессивные таймауты, основанные на измеренной производительности. Это хорошо, поскольку теперь мы помечаем tunnels как не прошедшие тест, когда они слишком медленны, чтобы делать что-либо полезное. Однако это и плохо, так как иногда в tunnels временно образуются очереди, и если мы тестируем их в этот период, мы признаём неработоспособным tunnel, который в противном случае работал бы.

Недавний график, показывающий, сколько времени занимает тест tunnel на одном router:

В целом это нормальные времена тестирования tunnel - они проходят через четыре удалённых пира (в 2-хоповых tunnels), что даёт для большинства из них ~1-200 мс на хоп. Однако так бывает не всегда, как видно - иногда на один хоп уходит время порядка секунд.

Вот где вступает в дело следующий график - время ожидания в очереди от момента, когда один конкретный router хотел отправить сообщение, до момента, когда это сообщение было записано в сокет:

Около 95% значений менее 50 мс, но пики — убийственные.

Нам нужно избавиться от этих скачков, а также обходить ситуации, когда больше пиров дают сбои. На данный момент, когда мы 'узнаём' о том, что из-за пира наши tunnels сбоят, мы на самом деле не узнаём ничего, что было бы специфично для его router - эти скачки могут приводить к тому, что даже пиры с высокой пропускной способностью кажутся медленными, если мы попадём как раз в этот момент.

## 3) Библиотека Streaming

Вторая часть задачи обхода сбоев tunnels будет частично реализована streaming lib (библиотекой потоковой передачи данных) — она обеспечит гораздо более надежную сквозную потоковую связь. Это обсуждение не ново — streaming lib займётся всеми теми «наворотами», о которых мы уже давно говорим (и, конечно, в ней будет своя доля ошибок). По этому направлению достигнут значительный прогресс, и реализация готова примерно на 60%.

Новости будут, когда будут новости.

## 4) files.i2p

Окей, в последнее время у нас появилось много новых eepsites(I2P Sites), что очень круто. Я просто хочу особо отметить один из них, поскольку в нём есть довольно удобная возможность для всех нас. Если вы ещё не заходили на files.i2p, это по сути поисковая система, похожая на Google, с кэшем сайтов, которые она обходит (так что вы можете и искать, и просматривать, когда eepsite(I2P Site) недоступен). Очень круто.

## 5) ???

На этой неделе заметки о текущем состоянии довольно краткие, но происходит много всего — у меня просто нет времени написать больше до встречи. Так что загляните в #i2p через несколько минут, и мы сможем обсудить всё, что я по глупости упустил.

=jr
