---
title: "SAM v1"
description: "Устаревший протокол Simple Anonymous Messaging (простой анонимный обмен сообщениями) (не рекомендуется к использованию)"
slug: "sam"
lastUpdated: "2025-03"
accurateFor: "0.9.20"
reviewStatus: "needs-review"
---

> **Устарело:** SAM v1 сохраняется только для исторической справки. Новым приложениям следует использовать [SAM v3](/docs/api/samv3/) или [BOB](/docs/legacy/bob/). Оригинальный мост поддерживает только назначения DSA-SHA1 и ограниченный набор параметров.

## Библиотеки

Дерево исходного кода Java I2P по-прежнему включает устаревшие привязки для C, C#, Perl и Python. Они больше не поддерживаются и распространяются главным образом для сохранения совместимости с архивными версиями.

## Согласование версий

Клиенты подключаются по TCP (по умолчанию `127.0.0.1:7656`) и обмениваются данными:

```
Client → HELLO VERSION MIN=1 MAX=1
Bridge → HELLO REPLY RESULT=OK VERSION=1.0
```
Начиная с Java I2P 0.9.14 параметр `MIN` является необязательным, а `MIN`/`MAX` принимают однозначные значения (`"3"` и т. д.) для обновленных мостов.

## Создание сеанса

```
SESSION CREATE STYLE={STREAM|DATAGRAM|RAW} DESTINATION={name|TRANSIENT} [DIRECTION={BOTH|RECEIVE|CREATE}] [option=value]*
```
- `DESTINATION=name` загружает или создаёт запись в `sam.keys`; `TRANSIENT` всегда создаёт временное назначение.
- `STYLE` выбирает виртуальные потоки (TCP-подобные), подписанные дейтаграммы или необработанные дейтаграммы.
- `DIRECTION` применяется только к сеансам потоков; по умолчанию — `BOTH`.
- Дополнительные пары ключ/значение передаются как параметры I2CP (например, `tunnels.quantityInbound=3`).

Мост отвечает:

```
SESSION STATUS RESULT=OK DESTINATION=name
```
При ошибках возвращаются `DUPLICATED_DEST`, `I2P_ERROR` или `INVALID_KEY`, а также необязательное сообщение.

## Форматы сообщений

Сообщения SAM — однострочные ASCII с разделёнными пробелами парами ключ/значение. Ключи — UTF‑8; значения могут быть заключены в кавычки, если содержат пробелы. Экранирование не определено.

Типы связи:

- **Потоки** – проксируются через библиотеку потоковой передачи I2P
- **Датаграммы с возможностью ответа** – подписанные полезные нагрузки (Datagram1)
- **Сырые датаграммы** – неподписанные полезные нагрузки (Datagram RAW)

## Параметры, добавленные в версии 0.9.14

- `DEST GENERATE` принимает `SIGNATURE_TYPE=...` (включая Ed25519 и т. п.)
- `HELLO VERSION` считает `MIN` необязательным и принимает строки версий из одной цифры

## Когда использовать SAM v1

Только для обеспечения совместимости с устаревшим ПО, которое нельзя обновить. Для всей новой разработки используйте:

- [SAM v3](/docs/api/samv3/) для полнофункционального доступа к потокам/датаграммам
- [BOB](/docs/legacy/bob/) для управления Destination (уникальными адресами в I2P) (всё ещё ограничен, но поддерживает более современные функции)

## Ссылки

- [SAM v2](/docs/legacy/samv2/)
- [SAM v3](/docs/api/samv3/)
- [Спецификация дейтаграмм](/docs/api/datagrams/)
- [Протокол потоковой передачи](/docs/specs/streaming/)

SAM v1 (протокол SAM версии 1) заложил основу для разработки приложений, не зависящей от конкретного router, но экосистема ушла вперёд. Рассматривайте этот документ скорее как пособие по совместимости, а не как отправную точку.
