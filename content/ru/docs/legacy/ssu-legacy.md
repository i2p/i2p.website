---
title: "Транспорт SSU (устаревший)"
description: "Первоначальный UDP-транспорт, использовавшийся до SSU2"
slug: "ssu"
lastUpdated: "2024-01"
accurateFor: "0.9.61"
type: docs
reviewStatus: "needs-review"
---

> **Устарело:** SSU (Secure Semi-Reliable UDP) был заменён на [SSU2](/docs/specs/ssu2/). В Java I2P SSU был удалён в выпуске 2.4.0 (API 0.9.61), а в i2pd — в 2.44.0 (API 0.9.56). Этот документ сохранён исключительно для исторической справки.

## Основные моменты

- UDP-транспорт, обеспечивающий зашифрованную, аутентифицированную доставку точка-точка сообщений I2NP.
- Основывался на 2048-битном рукопожатии Diffie–Hellman (то же простое число, что и в ElGamal).
- Каждая датаграмма содержала 16-байтовый HMAC-MD5 (нестандартный усечённый вариант) + 16-байтовый IV, за которыми следовала зашифрованная AES-256-CBC полезная нагрузка.
- Защита от повторов и состояние сеанса отслеживались внутри зашифрованной полезной нагрузки.

## Заголовок сообщения

```
[16-byte MAC][16-byte IV][encrypted payload]
```
Используемое вычисление MAC: `HMAC-MD5(ciphertext || IV || (len ^ version ^ ((netid-2)<<8)))` с 32-байтным ключом MAC. Длина полезной нагрузки представлялась 16-битным значением в формате big-endian, добавленным к данным внутри вычисления MAC. Версия протокола по умолчанию равнялась `0`; netId по умолчанию равнялся `2` (основная сеть).

## Сеансовые и MAC-ключи

Получено из общего секрета DH (Диффи-Хеллмана):

1. Преобразуйте разделяемое значение в байтовый массив в порядке big-endian (добавьте `0x00` в начало, если установлен старший бит).
2. Сеансовый ключ: первые 32 байта (дополните нулями, если короче).
3. Ключ MAC: байты 33–64; при нехватке используйте хэш SHA-256 от разделяемого значения.

## Статус

Routers больше не анонсируют адреса SSU. Клиентам следует перейти на транспортные протоколы SSU2 или NTCP2. Исторические реализации можно найти в более старых релизах:

- Исходные коды на Java до версии 2.4.0 в каталоге `router/transport/udp`
- Исходные коды i2pd до версии 2.44.0

Сведения о текущем поведении UDP‑транспорта см. в [спецификации SSU2](/docs/specs/ssu2/).
