---
title: "I2P 2005-04-12 状态说明"
date: 2005-04-12
author: "jr"
description: "每周更新，涵盖 0.5.0.6 版 netDb 修复、SSU UDP 传输进展、基于贝叶斯的对等体画像结果，以及 Q 的开发"
categories: ["status"]
---

嗨，大家好，又到更新时间了

* Index

1) 网络状态 2) SSU 状态 3) 贝叶斯对等体画像 4) Q 状态 5) ???

* 1) Net status

上周发布的 0.5.0.6 版本似乎已经修复了我们遇到的 netDb 问题（太好了）。与 0.5.0.5 相比，站点和服务的可靠性高了许多，不过也有一些报告称，某个站点或服务在连续运行几天后会变得不可访问。

* 2) SSU status

0.6 版 UDP 代码已有大量进展，第一批提交已经进入 CVS。它还不是你现在就能真正使用的东西，但基础已经就位。会话协商运行良好，半可靠的消息传递也如预期那样表现正常。不过仍有许多工作要做，需要编写测试用例，还要调试各种不寻常的情况，但这毕竟是进展。

如果一切顺利，我们可能会在下周进行一些 alpha 测试，仅面向能够显式配置其防火墙/NAT 的用户。我想先把整体运行理顺，再加入中继处理器，调优 netDb 以加快 routerInfo（路由器信息）过期，并选择要发布的中继。我也会借此机会开展大量测试，因为我们正在处理几个关键的队列相关因素。

* 3) Bayesian peer profiling

bla 一直在埋头推进一些关于我们如何决定 tunnel（隧道）要经过哪些对等节点的修订，虽然 bla 未能参加会议，但仍有一些有趣的数据可以汇报：

<+bla> 我进行了直接的节点速度测量：我使用长度为 0 的 OB tunnels、长度为        1 的 IB tunnels，batching-interval = 0ms，分析了        大约 150 个节点
<+bla> 另外，我刚刚做了一些 _非常_ 基本且        _初步的_ 速度估计，使用朴素贝叶斯        分类
<+bla> 后者使用默认的 expl. tunnel 长度完成
<+bla> 我拥有“ground truth”的节点集合与当前        测量中的节点集合的        交集为 117 个节点
<+bla> 结果也不算_太_差，但也谈不上多出色
<+bla> 参见 http://theland.i2p/estspeed.png
<+bla> 对非常慢/快速的基础区分还算可以，但在更快节点之间的        细粒度区分还有很大提升空间
<+jrandom2p> 嗯，实际值是怎么计算的——那是              完整的 RTT，还是 RTT/length？
<+bla> 使用普通的 expl. tunnels 时，几乎不可能        避免批处理延迟。
<+bla> 实际值就是 ground-truth 值：那些通过        使用 OB=0 和 IB=1 得到的
<+bla> （并且 variance=0，且没有批处理延迟）
<+jrandom2p> 不过从我这边看，结果挺不错的
<+bla> 估计的计时是通过对长度为 2 +/- 1 的 _实际的_ expl. tunnels        进行贝叶斯推断得到的
<+bla> 这些数据来自 3000 次 RTT，记录跨度约        3 小时（这很长了）
<+bla> 目前确实假设节点速度是静态的。        我还没有实现加权
<+jrandom2p> 听起来很棒。  干得好，bla
<+jrandom2p> 嗯，所以估计值应当等于实际值的 1/4
<+bla> jrandom：不：所有测得的 RTT（使用普通的 expl.        tunnels）都会根据往返中的        跳数进行校正
<+jrandom2p> 啊，好的
<+bla> 只有在那之后，才会训练贝叶斯分类器
<+bla> 目前，我把测得的每跳时间分箱为 10 个类别：        50、100、..., 450 毫秒，另加一个 >500 毫秒的类别
<+bla> 例如，每跳的小延迟可以赋予更大的权重，        完全失败（>60000 毫秒）也可以如此处理。
<+bla> 不过.... 65% 的估计计时落在距离实际节点时间        0.5 个标准差以内
<+bla> 不过，这需要重做，因为标准差        受到 >60000 毫秒失败的强烈影响

在进一步讨论之后，bla 调出了一个与现有速度计算器的对比，发布在 http://theland.i2p/oldspeed.png。那些 png 的镜像位于 http://dev.i2p.net/~jrandom/estspeed.png 和 http://dev.i2p.net/~jrandom/oldspeed.png

(for terminology, IB=入站 tunnel 跳数，OB=出站 tunnel 跳数，并且经过一些澄清后，“ground truth”（真值）测量结果是通过出站 1 跳和入站 0 跳获得的，而不是相反)

* 4) Q status

Aum 在 Q 上也取得了不少进展，最近正在开发一个基于 Web 的客户端界面。下一个 Q 构建版本将不向后兼容，因为它包含了一大批新功能，不过我相信，一旦有更多消息可公布，我们会从 Aum 那里听到更多信息 :)

* 5) ???

目前大致就这些（得在开会前把这收个尾）。哦，顺便一提，我看起来会比原计划更早搬家，所以在我去往最终落脚之处的途中，路线图上的一些日期可能会有所调整。总之，几分钟后来频道走一趟，用新点子来“骚扰”我们吧！

=jr
