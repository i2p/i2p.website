---
title: "I2P vývojářské setkání - 25. dubna 2005"
date: 2005-04-25
author: "jrandom"
description: "Zápis z vývojářské schůzky I2P ze dne 25. dubna 2005."
categories: ["meeting"]
---

## Stručné shrnutí

<p class="attendees-inline"><strong>Present:</strong> cervantes, Complication, inkeystring, jdot, jrandom, lsmith, perv, spinky</p>

## Záznam ze schůzky

<div class="irc-log"> 16:12 &lt;jrandom&gt; 0) ahoj 16:12 &lt;jrandom&gt; 1) Stav sítě a 0.6.1.17 16:12 &lt;jrandom&gt; 2) I2Phex 16:13 &lt;jrandom&gt;  3) ??? 16:13 &lt;jrandom&gt; 0) ahoj 16:13  * jrandom mává 16:13 &lt;@cervantes&gt; čau 16:13 &lt;jrandom&gt; týdenní statusové poznámky zveřejněny @ http://dev.i2p.net/pipermail/i2p/2006-April/001283.html 16:14 &lt;jrandom&gt; zatímco si to všichni prolítnete, pojďme na 1) Stav sítě  16:14 &lt;jrandom&gt; takže, jak většina z vás viděla, máme venku nové vydání a zatím jsou výsledky docela pozitivní 16:15 &lt;@cervantes&gt; (jupí!) 16:15 &lt;jrandom&gt; pořád nejsme tam, kde potřebujeme být, ale v zásadě to řeší hlavní problémy, které jsme viděli 16:15 &lt;jrandom&gt; jo, je fajn mít zase obstojné míry sestavování tunnel (tunel) u 2+ hop tunnels :) 16:16  * jrandom má 50%+ úspěšnost na jiném routeru (směrovač) s 1hop tunnels 16:17 &lt;jrandom&gt; myslím, že posledních pár změn v 0.6.1.17 by mělo do budoucna pomoci vyhnout se tomuhle typu kolapsu z přetížení 16:17 &lt;jrandom&gt; pro uživatele to ale znamená, že občas uvidíme vypršení lease, ale místo aby se to nabalovalo, dojde k backoff 16:17  * cervantes spouští Azureus 16:18 &lt;+Complication&gt; Dnes ráno jsem zaznamenal úspěšnost klientských tunnel (délka 2 +/- 1) kolem 35 % 16:18 &lt;+Complication&gt; Teď je to nižší, protože jsem zkusil pár úprav a ta poslední nebyla nic moc :D 16:18 &lt;@cervantes&gt; jrandom: dobrá práce s dohledáním – chvílemi jsme začínali vypadat jako freenet :) 16:19 &lt;jrandom&gt; *ehm* ;) 16:20 &lt;+fox&gt; &lt;inkeystring&gt; jrandom: nevadilo by ti stručně popsat backoff mechanismus? Momentálně pracuju na něčem takovém pro freenet 0.7 16:21 &lt;jrandom&gt; inkeystring: měli jsme backoff na transportní vrstvě, který snižuje přenosy k peerovi, když je transportní vrstva přetížená, ale to nestačilo 16:21 &lt;@cervantes&gt; *ehm* říkal jsem freenet, myslel jsem tor 16:21 &lt;+fox&gt; &lt;inkeystring&gt; :-) 16:22 &lt;jrandom&gt; inkeystring: nová změna byla propagovat to výš, aby se přestalo pokoušet stavět tunnels, když je naše komunikační vrstva saturovaná 16:22 &lt;jrandom&gt; (místo posílání dalších pokusů o sestavení tunnel) 16:22 &lt;+fox&gt; &lt;inkeystring&gt; díky – dělá transportní vrstva backoff jen při ztrátě paketů, nebo má příjemce nějakou možnost řídit tok? 16:23  * jrandom si vybavuje, že s toadem párkrát probíral dopad přetížení vs. směrování (na irc a na mém starém flogu), ale na žádné čistě pozitivní řešení si nevzpomínám :/ 16:23 &lt;jrandom&gt; příjemce může poslat NACK a máme podporu pro ECN, ale nebylo to potřeba 16:23 &lt;+fox&gt; &lt;inkeystring&gt; jo, debata se znovu objevila na freenet-dev :-) pořád žádná stříbrná kulka 16:24 &lt;+fox&gt; &lt;inkeystring&gt; super, díky za informace 16:24 &lt;+Complication&gt; Taky teď používají UDP, že? 16:24 &lt;jrandom&gt; aktuálně mají silně přetížené peery problém ne s omezením per-peer, ale s rozsahem komunikace mezi peery 16:24 &lt;+Complication&gt; (jako transportní protokol) 16:24 &lt;+fox&gt; &lt;inkeystring&gt; šířka = počet peerů? 16:24 &lt;jrandom&gt; ano 16:25 &lt;jrandom&gt; s vyšší úspěšností tunnel už peer nemusí mluvit se stovkami peerů jen proto, aby se postavil tunnel 16:25 &lt;jrandom&gt; takže si vystačí jen s 20–30 peery 16:25 &lt;jrandom&gt; (tedy přímo připojené peery) 16:26 &lt;+fox&gt; &lt;inkeystring&gt; hádám, že to jsou dobré zprávy pro NAT hole punching, keepalive atd.? 16:26 &lt;jrandom&gt; na druhou stranu, při 2–300 aktivních SSU spojení bude mít linka 6 KB/s problémy 16:26 &lt;jrandom&gt; jo 16:26 &lt;+fox&gt; &lt;inkeystring&gt; Complication: ano 16:27 &lt;+fox&gt; &lt;inkeystring&gt; (v 0.7 alfa) 16:27 &lt;+Complication&gt; Aha, tak pak nejspíš čelí podobným věcem 16:27 &lt;+Complication&gt; Doufám, že někdo najde kouzelnou kulku :D 16:27 &lt;jrandom&gt; ale jiným způsobem. Transportní vrstva je relativně snadný problém 16:27 &lt;+fox&gt; &lt;inkeystring&gt; myslím, že možná zrecyklovali část kódu SSU... nebo o tom aspoň mluvili 16:27 &lt;jrandom&gt; (alias dobře prozkoumáno přes 30 let) 16:28 &lt;jrandom&gt; ale vyvažování zátěže v i2p (a freenet) funguje na vyšší úrovni než point-to-point linky a má jiné požadavky 16:28 &lt;+fox&gt; &lt;inkeystring&gt; jo, ošemetná je interakce se směrováním 16:29 &lt;jrandom&gt; jo, i když I2P to má snazší (nemusíme najít konkrétní peery s danými daty, stačí kdokoli s kapacitou účastnit se našich tunnel) 16:30 &lt;+fox&gt; &lt;inkeystring&gt; takže není ztráta efektivity, když se vyhneš přetíženému peeru... 16:30 &lt;+fox&gt; &lt;inkeystring&gt; zatímco ve freenet může obcházení přetíženého peeru prodloužit cestu 16:30 &lt;+fox&gt; &lt;inkeystring&gt; každopádně sorry za OT 16:31 &lt;jrandom&gt; v pohodě, vysvětlit, proč změny v 0.6.1.17 ovlivnily náš kolaps z přetížení, bylo relevantní :) 16:31 &lt;jrandom&gt; ok, má ještě někdo něco k 1) Stavu sítě? 16:32 &lt;+Complication&gt; Jak už bylo zmíněno, při čistém .17 jsem pozoroval výraznou periodicitu v šířce pásma a počtu aktivních peerů 16:32 &lt;+Complication&gt; A pár dalších lidí to zřejmě zažívá taky, i když netuším, jak časté to je 16:33 &lt;+Complication&gt; Přemýšlím nad hlavními příčinami, hlavně z pohledu řízení tempa u tunnel, ale zatím bez řešení 16:33 &lt;+Complication&gt; Dokázal jsem své grafy trochu zploštit, ale za cenu celkového zhoršení 16:33 &lt;+Complication&gt; Zkoušel jsem úpravy jako: 16:34 &lt;+Complication&gt;&gt; _log.error("Allowed was " + allowed + ", but we were overloaded, so ended up allowing " + Math.min(allowed,1)); 16:34 &lt;+Complication&gt; (to mělo zabránit tomu, aby úplně přestalo zkoušet stavět své vlastní tunnels) 16:35 &lt;jrandom&gt; aha jasně 16:35 &lt;+Complication&gt; (a samozřejmě je loglevel mimo, protože jsem ho kvůli testování změnil) 16:35 &lt;jrandom&gt; máme tam nějaký kód, který se snaží tu periodicitu trochu rozladit, ale nefunguje to úplně správně (zjevně) 16:36  * perv právě odstřelil svůj systém :( 16:36 &lt;+Complication&gt; Ale zkoušel jsem podobné věci a zkoušel snížit růstový faktor počtu tunnel 16:36 &lt;perv&gt; existuje undelete pro reiser4? 16:36 &lt;jrandom&gt; v zásadě, když se budeme tvářit, že tunnels vyprší (náhodně) dřív, než skutečně vyprší, mělo by to pomoci 16:36 &lt;+Complication&gt; Zrovna čtu velkou funkci "countHowManyToBuild" v TunnelPool.java :D 16:36 &lt;+Complication&gt; Ještě jsem ji nedočetl 16:37 &lt;jrandom&gt; (i když to samozřejmě zvýší frekvenci stavění tunnel, což před 0.6.1.17 nebylo rozumné) 16:37 &lt;+Complication&gt; perv: něco existuje 16:37 &lt;jrandom&gt; hmm, dát tam náhodnost by bylo těžké, Complication, protože tu funkci voláme poměrně často 16:38  * perv zvažuje záchranu a přechod na Gentoo 16:38 &lt;jrandom&gt; doporučil bych podívat se na náhodnění doby expirace úspěšně postavených tunnels 16:38 &lt;+Complication&gt; perv: s reiserem jsi na tom určitě líp než s ext3 16:38 &lt;+Complication&gt; perv: ale z hlavy to nevím 16:38 &lt;+Complication&gt; jrandom: pravda, někdy by to takhle mohlo přestavovat víc, než je třeba 16:38 &lt;jrandom&gt; (aby si stávající countHowManyToBuild myslela, že je potřebuje dřív, než doopravdy) 16:38 &lt;+Complication&gt; (a někdy to nevyhnutelně přestaví víc, když se tunnels rozbijí a zpanikaří to) 16:40 &lt;+Complication&gt; Hmm, možnost, kterou jsem nezvážil... 16:41 &lt;+Complication&gt; Každopádně si s tím taky hraju, ale zatím žádná užitečná pozorování 16:42 &lt;jrandom&gt; super, mám k tomu pár drobných úprav, se kterými si hraju – možná je dáme dohromady do dalšího buildu a uvidíme, jak to funguje na rozumně životaschopné síti ;) 16:43 &lt;spinky&gt; Je nějaká statistika, kde lze vidět, kolik overheadu síť I2P přidává k aplikačním datům? 16:43 &lt;jrandom&gt; "overhead" je tak nabitý termín... ;) 16:43 &lt;jrandom&gt; říkáme tomu cena anonymity ;) 16:43 &lt;spinky&gt; hehe 16:45 &lt;jrandom&gt; (alias ne tak úplně. U aplikační nálože na dokonalé síti s nulovým přetížením a 1+1hops je účinnost na koncích něco jako 70–80 %) 16:45 &lt;jrandom&gt; ((naposledy, když jsem měřil)) 16:45 &lt;jrandom&gt; ale to jsou opravdu laboratorní podmínky 16:45 &lt;jrandom&gt; živá síť je mnohem složitější 16:47 &lt;spinky&gt; Jasně, myslel jsem jen množství extra dat použitých na vytváření tunnels, klíčů, paddingu atd  16:47 &lt;spinky&gt; ...v porovnání s přenesenými aplikačními daty 16:47 &lt;jrandom&gt; záleží na rámování zpráv, přetížení, úspěšnosti sestavování tunnel atd 16:48 &lt;jrandom&gt; 2 hop tunnel může síť postavit s přenosem 20 KB 16:48 &lt;+Complication&gt; Chtěl jsem to občas testovat, hlavně s cílem odhadnout "plýtvání" u aplikací pro hromadný přenos jako BitTorrent a I2Phex 16:48 &lt;+Complication&gt; Ale nikdy jsem se nedostal k čistému měření mezi svými dvěma uzly 16:48 &lt;+Complication&gt; Jednou se k tomu ale vrátím 16:49 &lt;jrandom&gt; Complication: s ukecanými aplikacemi je to dost těžké, mnohem jednodušší je měřit wget :) 16:49 &lt;+Complication&gt; To je svatá pravda 16:50 &lt;+Complication&gt; V tom, co se mi podařilo zkusit, nebyla ani stopa po přesnosti 16:54 &lt;jrandom&gt; ok, pokud k 1) už nic není, přesuneme se k 2) I2Phex 16:55 &lt;jrandom&gt; Complication: co máš nového?  :) 16:55 &lt;+Complication&gt; Včerejší commit byl oprava určitých problémů, které někteří zažívali s mým pitomým detektorem prvního spuštění 16:56 &lt;+Complication&gt; Detektor prvního spuštění je teď méně pitomý a bar hlásil, že se zdá, že začal fungovat normálně 16:56 &lt;+Complication&gt; Nicméně, vzhledem k tomu, že I2Phex se v aktuálních podmínkách sítě už zdá provozuschopný, 16:56 &lt;+Complication&gt; zkusím najít i bug s rehash. 16:57 &lt;+Complication&gt; Pokud se mi to povede 16:57 &lt;jrandom&gt; super, vím, že tě tenhle pronásleduje už měsíce  16:57 &lt;+Complication&gt; Zajímavé je, že ho možná má i mainline Phex, a zkusím najít a přečíst si i jejich pozorování 16:58 &lt;jrandom&gt; ale je fajn slyšet, že oprava startu je tam 16:58 &lt;jrandom&gt; aha jasně 16:58 &lt;+Complication&gt; =to je ono 16:58 &lt;+Complication&gt; Momentálně nemůžu potvrdit, jestli to mainline Phex má nebo ne – osobně jsem to tam neviděl 16:59 &lt;jrandom&gt; (občasné chyby)-- 16:59 &lt;+Complication&gt; Je těžké to vyvolat kontrolovaně, a tím pádem těžké najít 17:00 &lt;+Complication&gt; A z mé strany je to zatím asi vše 17:00 &lt;+Complication&gt; Později jsem přemýšlel, jestli by nestálo za to omezit počet paralelních pokusů o kontaktování peerů, které I2Phex spouští najednou 17:01 &lt;jrandom&gt; jo, asi ano 17:01 &lt;+Complication&gt; Protože by to v krátkém čase vytvořilo spoustu NetDB lookupů a z pohledu I2P routeru by to nemuselo být úplně hezké 17:02 &lt;jrandom&gt; a nové kontakty na destination vyžadují elG místo aes 17:02 &lt;+Complication&gt; Ale zatím jsem kvůli tomu nic nečetl ani nenapsal žádný kód 17:04 &lt;jrandom&gt; k, v pohodě. Možná to zabalí řešení to mýtické sloučení i2phex/phex :) 17:04 &lt;+Complication&gt; A z mé strany to je asi všechno z fronty I2Phex... 17:04 &lt;jrandom&gt; super, díky za aktualizaci a za snahu se v tom vrtat! 17:05 &lt;jrandom&gt; ok, přeskočme k 3) ??? 17:05 &lt;jrandom&gt; má někdo ještě něco k projednání na schůzce? 17:05 &lt;lsmith&gt; ahoj! chtěl bych pochválit vývojáře za skvělé zlepšení v posledním vydání, moje celková šířka pásma ukazuje 0.9/1.4 KB/s a pořád jsem připojený na IRC... je to... šíleně cool :) 17:05 &lt;+Complication&gt; :D 17:06 &lt;jrandom&gt; díky za trpělivost po cestě – podpora uživatelů s nízkou šířkou pásma je zásadní 17:06 &lt;@cervantes&gt; lsmith: to je fakt dobré 17:06 &lt;@cervantes&gt; * Spojení resetováno 17:06 &lt;jrandom&gt; heh 17:07 &lt;lsmith&gt; :) 17:09 &lt;jrandom&gt; jo a ještě jedna věc – zzz je zpátky a s ním přichází stats.i2p :) 17:09 &lt;jrandom&gt; [wewt] 17:11 &lt;+Complication&gt; Dost užitečný zdroj srovnávacích dat :) 17:11 &lt;jrandom&gt; jasnačka 17:11 &lt;jrandom&gt; ok, má někdo ještě něco ke schůzi? 17:13 &lt;jrandom&gt; pokud ne... 17:13 &lt;jdot&gt; mám po baf jednu dvě otázky 17:13 &lt;jrandom&gt; heh ok, tak rozjedeme baffer :) 17:13  * jrandom se rozmachuje... 17:13  * jrandom *baf*s schůzi uzavírá </div>
