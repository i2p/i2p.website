---
title: "Setkání vývojářů I2P - 18. dubna 2005"
date: 2005-04-18
author: "jrandom"
description: "Zápis ze schůzky vývojářů I2P ze dne 18. dubna 2005."
categories: ["meeting"]
---

## Stručné shrnutí

<p class="attendees-inline"><strong>Přítomni:</strong> Complication, frosk, jrandom, spinky</p>

## Zápis ze schůzky

<div class="irc-log"> 16:09 &lt;jrandom&gt; 0) ahoj 16:09 &lt;jrandom&gt; 1) Stav sítě a 0.6.1.16 16:09 &lt;jrandom&gt; 2) Vytváření tunnelů a přetížení 16:10 &lt;jrandom&gt; 3) Feedspace 16:10 &lt;jrandom&gt; 4) ??? 16:10 &lt;jrandom&gt; 0) ahoj 16:10  * jrandom mává 16:10 &lt;jrandom&gt; týdenní statusové poznámky zveřejněny na http://dev.i2p.net/pipermail/i2p/2006-April/001281.html 16:10  * frosk taky 16:10 &lt;jrandom&gt; (taky skoro dvě hodiny *před* schůzkou :) 16:11 &lt;jrandom&gt; ok, protože jsem si jistý, že jste si poznámky už prolítli, pojďme na 1) Stav sítě 16:12 &lt;+Complication&gt; Ahoj :) 16:12  * Complication rychle bere poznámky 16:12 &lt;jrandom&gt; vydání 0.6.1.16 opravilo velmi dlouho přetrvávající bug v našem PRNG (pseudonáhodný generátor), který způsobil značné množství libovolných odmítnutí tunnelů 16:13 &lt;jrandom&gt; (kořenová příčina byla zanesena loni v říjnu, ale teď je opravená) 16:13 &lt;+Complication&gt; Stav tady: funguje snesitelně s tunnely o 1 + 0..1 hopu, s 2 + 0..1 nebo 2 +/- 0..1 se nechová dobře 16:14 &lt;jrandom&gt; jo, to je pochopitelné, zvlášť na pomalejších linkách 16:14 &lt;jrandom&gt; (bohužel „pomalejší“ zas není nijak zvlášť pomalé) 16:15 &lt;jrandom&gt; pořád je spousta práce, a 0.6.1.16 ještě není tam, kde potřebujeme být, ale je to pokrok 16:17 &lt;+Complication&gt; Něco, o čem jsem přemýšlel, ohledně toho, čemu jsi říkal „kolaps z přetížení“ 16:18 &lt;+Complication&gt; Jedním ze způsobů, jak omezit jeho dopad, by mohlo být skutečně vyžadovat, aby router přijímal určitou kvótu požadavků na participaci 16:19 &lt;+Complication&gt; (něco určeného uživatelem přímo nebo nepřímo?) 16:19 &lt;jrandom&gt; určené kterým uživatelem? 16:19 &lt;+Complication&gt; (např. nějaká část share percentage (procento sdílení) nebo další parametr) 16:19 &lt;jrandom&gt; místním uživatelem, nebo námi jako vzdálenými uživateli? 16:19 &lt;+Complication&gt; Určené každým sám pro sebe 16:19 &lt;@frosk&gt; přejdeme tedy k 2) pak? :) 16:20 &lt;jrandom&gt; jo, můžeme se klidně považovat za u 2) :) 16:20 &lt;+Complication&gt; Abych mohl svému routeru například říct „i když jsi přetížený, dál směruj minimálně 4 KB/s“ 16:21 &lt;jrandom&gt; Complication: to není moc možné – když je router příliš přetížený, ostatní lidé (doufejme ;) přestanou žádat, aby se účastnil tunnelů. 16:21 &lt;+Complication&gt; (to by samozřejmě znamenalo, že nějaký místní cíl může být o něco déle offline) 16:21 &lt;jrandom&gt; a když nejsou požádáni, /nemůžou/ tlačit data ostatních 16:22 &lt;+Complication&gt; Aha, asi jsem to měl formulovat podstatně jasněji 16:24 &lt;+Complication&gt; Představoval jsem si, že by to při určité kvótě participujícího provozu omezovalo své vlastní zprávy pro vytváření tunnelů místo participujících tunnelů 16:24 &lt;+Complication&gt; např. „Nikdy neomezím své participující tunnely pod 4 KB/s. Kdyby to bylo potřeba, omezím raději vlastní provoz.“ 16:26 &lt;jrandom&gt; hmm, jsou v tom rizika pro anonymitu (i když je to pořád v rovině selektivního DoS, proti kterému se stejně nebráníme) 16:27 &lt;jrandom&gt; ale omezování našich vlastních lokálních buildů tunnelů při přetížení teď testuju – přidat podporu pro volitelné ignorování 4KBps spodního limitu by mělo být dost jednoduché 16:28 &lt;spinky&gt; V současnosti nedostaneš žádný cover traffic (krycí provoz) při přenosu velkého množství dat. 16:29 &lt;spinky&gt; Mít spodní hranici pro šířku pásma pro participaci zní dobře. 16:30 &lt;jrandom&gt; no, spodní hranici máme (jak jako procento sdílení, tak vnitřních 4KBps rezervovaných po přidělení veškeré šířky pásma) 16:30 &lt;+Complication&gt; Ach jo, odpojení... Doufám, že se z toho, co jsem říkal, moc neztratilo, ale odpovědi si budu muset přečíst z logu :) 16:32 &lt;@frosk&gt; je na 4KBps něco významného? 16:33 &lt;jrandom&gt; pár věcí – 4KB ~= sizeof(tunnel create message), a podle heuristiky jsem nikdy neslyšel o routeru, který by úspěšně běžel na méně 16:33 &lt;spinky&gt; Možná jsou to bugy, které brání tomu, aby procento sdílení fungovalo? 16:34 &lt;jrandom&gt; co tě vede k tomu říct, že procento sdílení nefunguje? 16:34 &lt;@frosk&gt; chápu 16:34 &lt;+Complication&gt; frosk: ne, je to jen číslo v aktuálním kódu a odkazoval jsem se na něj, když jsem se snažil vysvětlit, co jsem si představoval 16:35 &lt;+Complication&gt; (ne z nějakých hlubokých důvodů, jen protože to, co jsem si představoval, bylo v jistém smyslu jeho přesným opakem) 16:35 &lt;spinky&gt; Je nastaveno na 80 % a participace jde na 0, když lokálně generuju data. Možná tomu nerozumím správně. 16:36 &lt;jrandom&gt; aha, ano, to není to, co dělá procento sdílení 16:36 &lt;+Complication&gt; spinky: je to maximální limit toho, co se může sdílet, podmíněný šířkou pásma skutečně dostupnou pro sdílení 16:37 &lt;+Complication&gt; Pokud místní provoz zabere 70 %, zbývá ti jen 10 % na sdílení 16:37 &lt;+Complication&gt; Když je místní provoz velký, zbude ti 0 % a horní limit 80 % se nikdy nedotkne 16:37 &lt;spinky&gt; Ok. Vidím, že to říká ‚až‘... 16:38 &lt;+Complication&gt; A je tu taky rezerva 4 KB/s 16:38 &lt;jrandom&gt; aha, je to procento sdílení z toho, co máš k dispozici 16:38 &lt;spinky&gt; Možná další nastavení pro spodní hranici šířky pásma pro participaci, pod kterou router přijme víc tunnelů? 16:38 &lt;jrandom&gt; pokud používáš 95 % své šířky pásma, bude sdílet až 80 % ze zbývajících 5 % 16:39 &lt;+Complication&gt; Aha, tak jsem to taky částečně nepochopil 16:40 &lt;fox&gt; &lt;zorglu1&gt; jak i2p měří množství šířky pásma používané jinými místními aplikacemi ? 16:40 &lt;spinky&gt; (Jen říkám, pokud považujete cover traffic (krycí provoz) za dobrou věc, možná je dobré mít ho konfigurovatelný i při silném místním využití šířky pásma) 16:40 &lt;+Complication&gt; Myslel jsem, že se to uplatňuje proti trvalému limitu 16:40 &lt;jrandom&gt; zorglu1: měří využití šířky pásma i2p a zná limity šířky pásma i2p 16:41 &lt;jrandom&gt; oh, hmm, když se podívám zpět do kódu, int availBps = (int)(((maxKBps*1024)*share) - used); 16:41 &lt;jrandom&gt; takže máš pravdu, Complication  16:42 &lt;jrandom&gt; spinky: cover traffic (krycí provoz) je jen do určité míry užitečný na low-latency mixnetu 16:42 &lt;jrandom&gt; dává to určitý stimul pro routery s vyšší šířkou pásma, ale ti bez volné šířky pásma mají jen málo možností 16:49 &lt;jrandom&gt; každopádně, problém s přetížením tunnelů tu je už nějakou dobu, ale teprve nedávno ho zhoršily šílené míry odmítání tunnelů 16:49 &lt;jrandom&gt; doufejme, že příští revize to pro nás vyčistí 16:49 &lt;jrandom&gt; ok, má někdo ještě něco k 2) vytváření tunnelů a přetížení? 16:50 &lt;@frosk&gt; zní to, že by to vyžadovalo pár změn v schématu stavby tunnelů 16:50 &lt;+Complication&gt; Doufám, že to pomůže věci zlepšit :) 16:51 &lt;+Complication&gt; Mimochodem... 16:52 &lt;jrandom&gt; no, máme pár levných oprav, jako snížení maximální souběžnosti, škrcení našich pokusů o build při přetížení, snížení frekvence dropů (na rozdíl od explicitního odmítnutí) a úpravu profilování tak, aby motivovalo k explicitním odmítnutím místo dropů 16:52 &lt;+Complication&gt; ...našel jsi náhodou něco, co by vysvětlilo velký rozdíl mezi ukazateli syrové šířky pásma a ukazateli užitečného zatížení tunnelu? 16:52 &lt;+Complication&gt; (např. celková šířka pásma 1 GB, součet payloadu tunnelu 300 MB) 16:52 &lt;jrandom&gt; ale je pravda, že to ovlivňuje jen rozsah 16:52 &lt;+Complication&gt; (protože jsem v poslední době nebyl na IRC, nejsem si jistý, jestli ses na to nedávno díval) 16:54 &lt;jrandom&gt; moc jsem to nezkoumal, ale pamatuj, že požadavky na build tunnelu pro odchozí tunnely nejsou tunnelové zprávy (a je jich hodně, když uspěje jen 0,1 %. a při 4 KB za kus...) 16:54  * Complication si není jistý, jestli jsou to ukazatele, nebo skutečný efekt 16:55 &lt;+Complication&gt; Oh... odchozí požadavky na build... jasně 16:55 &lt;jrandom&gt; nadcházející build -1 přidává spoustu statistik pro monitorování paketů podle typu zprávy 16:55 &lt;+Complication&gt; To by mohlo být přesně ono 16:55 &lt;jrandom&gt; (jsou tam také požadavky na účast při buildu – přeposílání odpovědi) 16:56 &lt;jrandom&gt; ((takže to není jen lokální věc)) 17:00 &lt;+Complication&gt;&gt; Díky, to toho hodně vysvětluje :) 17:00 &lt;+Complication&gt;&gt; Takže to není žádné voodoo, ale docela reálný provoz, na který jsem jen zapomněl, protože se na místech, která jsem kontroloval, zvlášť nepočítal 17:00 &lt;+Complication&gt; Skutečně by musel nastávat a opravdu by stál hodně bajtů 17:00 &lt;+Complication&gt; Zvlášť při nízké úspěšnosti 17:01 &lt;jrandom&gt; jo, i když by to nemělo stát tolik, kolik to stojí, protože bychom měli mít vyšší úspěšnost, než máme :) 17:01 &lt;jrandom&gt; ok, ještě něco k 2)? 17:02 &lt;jrandom&gt; pokud ne, přejděme k 3) Feedspace 17:02 &lt;jrandom&gt; frosk: chceš nám dát aktualizaci? 17:03 &lt;jrandom&gt; (nebo nám řekni, ať jdeme fsck off a přečteme si eepsite?  ;) 17:04 &lt;@frosk&gt; tak pro ty, kdo nevěnovali pozornost frosk.i2p nebo feedspace.i2p, feedspace teď v zásadě funguje (podle mé vlastní definice „v zásadě“) 17:04 &lt;jrandom&gt; (w00t) 17:05 &lt;@frosk&gt; poslední dobou přibylo pár pěkných věcí, jako infrastrukturní podpora pro transporty jiné než i2p (napadá mě tor a neanonymní tcp/ip) 17:06 &lt;@frosk&gt; takže časem plánujeme umožnit, aby syndie (v chystaném a pravděpodobně velmi pěkném přepisu) používal feedspace jako jednu ze svých metod syndikace 17:06 &lt;@frosk&gt; teď zatím nejsou žádné klientské aplikace, které by feedspace k něčemu skutečně používaly :) testoval jsem s extrémně hrubou servletovou aplikací 17:07 &lt;jrandom&gt; (crude + functional)++ 17:07 &lt;@frosk&gt; takže je tu samozřejmě volné místo pro klientského hackera ;) 17:08 &lt;@frosk&gt; pořád je ještě pár nezbytností, které feedspace potřebuje před jakýmkoli veřejným testováním, ale už by to nemělo trvat dlouho :) 17:08 &lt;jrandom&gt; pěkné 17:08 &lt;jrandom&gt; můžeme nějak pomoct? 17:08 &lt;@frosk&gt; taky jsem trochu pracoval na dokumentaci, která chyběla 17:09 &lt;spinky&gt; Vidíš feedspace jako použitelné pro velké soubory? 17:10 &lt;@frosk&gt; 1) klientské aplikace používající (pořád nezdokumentované) xmlrpc api, 2) http://feedspace.i2p/wiki/Tasks, 3) zapojit se do testování, až přijde čas 17:10 &lt;@frosk&gt; podpora velkých souborů teď není prioritou, ale možná později 17:10 &lt;@frosk&gt; fokus pro „1.0“ jsou menší zprávy jako blogové a diskusní příspěvky a libovolné události 17:11 &lt;jrandom&gt; i když posílání .torrent souborů do bt klienta s podporou rss/feedspace by nebyl problém 17:11 &lt;@frosk&gt; velké soubory mohou a nemusí fungovat :) 17:11 &lt;@frosk&gt; to by byla super věc 17:12 &lt;jrandom&gt; feed2snark ;) 17:12 &lt;@frosk&gt; doufám, že uvidíme všelijaké takové „adapter“ aplikace :) 17:12 &lt;+Complication&gt; No, jsem si jistý, že lidi najdou způsoby, jak přesouvat velké soubory pomocí bit... ehm, postranních kanálů :) 17:15 &lt;@frosk&gt; cítím se trochu provinile, že kód feedspace používá všelijaké funkce java1.5. teď by se to asi těžko kompilovalo/používalo na free java, ale dožene to, jsem si jistý :) 17:15 &lt;jrandom&gt; jejda 17:16 &lt;jrandom&gt; no, šušká se, že gcj převezme ecj pro 1.5-ismy 17:16 &lt;spinky&gt; Complication: Poníci se sedlovými brašnami plnými hdd? 17:16 &lt;@frosk&gt; jo 17:17 &lt;+Complication&gt; spinky: droni, v mém preferovaném případě :P 17:17  * jrandom se pořád jen stěží posouvá k 1.4-ismům 17:17 &lt;+Complication&gt; Ale hádám, že poníci taky fungují :P 17:17 &lt;jrandom&gt; i když 1.6 je fakt fajn ;) 17:17 &lt;@frosk&gt; aby to zůstalo kompatibilní s gcj? 17:18 &lt;@frosk&gt; no 1.6 stejně pro většinu věcí nemá moc „ismů“, myslím :) 17:18 &lt;+Complication&gt; (nebo létající ježci shazující paměťové karty) 17:18 &lt;jrandom&gt; gcj/classpath/etc, ale také kvůli výkonu (1.5 mi přišla trochu těžkopádnější než 1.4) 17:19 &lt;jrandom&gt; pravda, zlepšení v 1.6 jsou z velké části specifická pro vm/bytecode 17:19 &lt;@frosk&gt; hm ok 17:20  * jrandom nesnažím se tě přesvědčovat, abys nepoužíval 1.5ismy.  jsem si jistý, že máš své důvody, a např. azureus už 1.5 vyžaduje 17:21 &lt;@frosk&gt; no, zpátky už nejde :) doufejme, že to nebude moc hrbolaté 17:24 &lt;jrandom&gt; jo, jsem si jistej, že to dopadne fajn :) 17:25 &lt;jrandom&gt; ok, super, má někdo ještě něco k 3) feedspace? 17:25  * frosk objímá své generics a java.util.concurrent ;) 17:25 &lt;jrandom&gt; heheh 17:27 &lt;jrandom&gt; ok, pokud není nic dalšího k 3, přesuňme se k 4) ??? 17:27 &lt;jrandom&gt; má někdo ještě něco na schůzku? 17:27 &lt;+Complication&gt; Malá otázka, kterou jsem se měl zeptat u 2) 17:28 &lt;+Complication&gt; Víte, jak typicky vznikají nečinné participující tunnely? 17:28 &lt;+Complication&gt; Jsou většinou známkou neúspěšných buildů tunnelů, kde o neúspěchu ve skutečnosti ví jen tvůrce? 17:28 &lt;+Complication&gt; Nebo mají další důvody? 17:28 &lt;+Complication&gt; (kromě, samozřejmě, zjevného – totiž aplikace, která sedí nečinně) 17:29 &lt;jrandom&gt; nečinná aplikace by neměla nečinné tunnely (testovaly by se) 17:29 &lt;jrandom&gt; nečinné tunnely selhaly z toho či onoho důvodu 17:29 &lt;jrandom&gt; (buď se nepodařilo je úplně vytvořit, nebo selhaly během provozu) 17:30 &lt;+Complication&gt; Správně, takže všechny tunnely se stejně testují a testování tunnelů by mělo způsobovat provoz... přesně tak 17:30 &lt;+Complication&gt; To mě vlastně přivádí k druhé části otázky: přineslo by nějaký užitek zjistit, že tunnel je nečinný, a zrušit ho dřív? 17:31 &lt;+Complication&gt; Daly by se tím ušetřit nějaké vzácné zdroje? 17:32 &lt;jrandom&gt; žádné – tunnel, který netlačí data, nevyužívá zdroje 17:32 &lt;jrandom&gt; (ok, používá trochu ram, možná 32 bajtů) 17:32 &lt;+Complication&gt; Nebo by to třeba mohlo routeru pomoct mít lepší představu o svém zatížení a podobných parametrech... 17:33 &lt;jrandom&gt; predikce využití šířky pásma založené na historii tunnelů jsou určitě otevřená otázka 17:33 &lt;+Complication&gt; Nebo by to byla jen zbytečná práce a je nejlepší počkat, až to přirozeně vyprší? 17:33 &lt;+Complication&gt; (jako teď) 17:34 &lt;jrandom&gt; dřív jsme dělali nějaké predikce, ale nepřineslo nám to jasné přínosy, takže teď používáme jednodušší algoritmus 17:34 &lt;+Complication&gt; Aha, takže žádný zisk... 17:34 &lt;+Complication&gt; Díky, to bylo v zásadě vše, na co jsem se k tomu chtěl zeptat :) 17:34 &lt;jrandom&gt; není zač, pochopitelná obava 17:34 &lt;jrandom&gt; ok, má někdo ještě něco na schůzku? 17:35 &lt;+Complication&gt; Jo, kdyby se dělaly predikce, procento nečinných tunnelů by mohlo zkreslovat odhady 17:35 &lt;+Complication&gt; (pokud by se výrazně měnilo) 17:36 &lt;jrandom&gt; jo, chtěli bychom udržovat idle % jako součást odhadu 17:36 &lt;jrandom&gt; (dělali jsme to – viz metoda RouterThrottleImpl.allowTunnel) 17:37 &lt;+Complication&gt; Oh, to jsem nevěděl :) 17:37 &lt;jrandom&gt; a povšimni si nového komentáře: 17:38 &lt;jrandom&gt;  // ok, ignore any predictions of 'bytesAllocated', since that makes poorly 17:38 &lt;jrandom&gt;  // grounded conclusions about future use (or even the bursty use).  Instead, 17:38 &lt;jrandom&gt;  // simply say "do we have the bw to handle a new request"? 17:39  * Complication si k tomu souboru teprve proklikává cestu, ale díky :) 17:39 &lt;jrandom&gt; w3rd 17:40 &lt;jrandom&gt; ok, pokud už nic dalšího na schůzku... 17:40  * jrandom ukončuje 17:41  * jrandom *baf* zavírá schůzku </div>
