---
title: "مناقشة NTCP (بروتوكول نقل قائم على TCP في I2P)"
description: "ملاحظات تاريخية تقارن بين بروتوكولات النقل NTCP وSSU وأفكار مقترحة للضبط"
slug: "ntcp"
layout: "single"
reviewStatus: "needs-review"
---

## مناقشة NTCP مقابل SSU (مارس 2007)

### أسئلة حول NTCP (بروتوكول النقل عبر TCP في I2P)

_مقتبس من محادثة على IRC بين zzz و cervantes._

- **لماذا يحظى NTCP بالأولوية على SSU بينما يبدو أن NTCP يضيف عبئاً إضافياً وكموناً؟**  
  يوفّر NTCP عموماً موثوقية أفضل من التنفيذ الأصلي لـ SSU.
- **هل يصطدم التدفق عبر NTCP بمشكلة TCP-over-TCP collapse (انهيار TCP فوق TCP) الكلاسيكية؟**  
  ربما، لكن كان المقصود من SSU أن يكون خيار UDP خفيفاً، وقد اتضح في الممارسة أنه غير موثوق بما يكفي.

### “NTCP يُعتبر ضارًا” (zzz، 25 مارس 2007)

الملخص: قد يؤدي ارتفاع زمن الاستجابة والحمولة الإضافية في NTCP إلى حدوث ازدحام، ومع ذلك تفضّل آلية التوجيه NTCP لأن bid scores (قيم العطاء المستخدمة للمفاضلة) فيه مضبوطة برمجياً بشكل ثابت لتكون أدنى من SSU. وقد أثار التحليل عدة نقاط:

- حالياً يُقدّم NTCP عرضاً أقل من SSU، لذا تُفضّل routers NTCP ما لم تكن هناك جلسة SSU قائمة بالفعل.
- ينفّذ SSU الإقرارات بمُهلات محكومة بإحكام وبإحصاءات؛ بينما يعتمد NTCP على Java NIO TCP مع مُهلات على طراز RFC قد تكون أطول بكثير.
- معظم الحركة (HTTP وIRC وBitTorrent) تستخدم مكتبة البث الخاصة بـ I2P، ما يعني فعلياً تكديس TCP فوق NTCP. عندما تُعيد الطبقتان الإرسال، قد يحدث انهيار ازدحام. تشمل المراجع الكلاسيكية [TCP over TCP is a bad idea](http://sites.inka.de/~W1011/devel/tcp-tcp.html).
- زادت مُهلات مكتبة البث من 10 ثوانٍ إلى 45 ثانية في الإصدار 0.8؛ الحد الأقصى لمهلة SSU هو 3 ثوانٍ، بينما يُفترض أن تقترب مُهلات NTCP من 60 ثانية (توصية RFC). يصعب فحص معلمات NTCP خارجياً.
- أظهرت ملاحظات ميدانية في 2007 تذبذب إنتاجية الرفع في i2psnark، ما يوحي بحدوث انهيار ازدحام دوري.
- اختبارات الكفاءة (بفرض تفضيل SSU) خفّضت نسب الحمل الإضافي لـ tunnel من نحو 3.5:1 إلى 3:1 وحسّنت مقاييس البث (حجم النافذة، RTT، نسبة الإرسال/الإقرار).

#### مقترحات من موضوع عام 2007

1. **عكس أولويات النقل** بحيث تُفضّل routers بروتوكول SSU (مع استعادة `i2np.udp.alwaysPreferred`).
2. **وسم حركة مرور التدفق** بحيث يُخفض SSU عروضه فقط للرسائل الموسومة، دون المساس بإخفاء الهوية.
3. **تشديد حدود إعادة الإرسال في SSU** لتقليل خطر الانهيار.
4. **دراسة الطبقات التحتية شبه الموثوقة** لتحديد ما إذا كانت عمليات إعادة الإرسال أسفل مكتبة التدفق تحقق فائدة صافية.
5. **مراجعة طوابير الأولوية والمهلات الزمنية**—على سبيل المثال، زيادة مهلات التدفق إلى ما بعد 45 ثانية للتوافق مع NTCP.

### رد من jrandom (27 مارس 2007)

الحجج المضادّة الرئيسية:

- يوجد NTCP لأن عمليات نشر SSU المبكرة عانت انهيار الازدحام. حتى معدلات إعادة الإرسال المتواضعة لكل قفزة قد تتفاقم بشكل كبير عبر tunnels متعددة القفزات.
- من دون إقرارات على مستوى tunnel، لا تحصل إلا نسبة من الرسائل على حالة تسليم طرف-إلى-طرف؛ وقد تكون الإخفاقات صامتة.
- يمتلك التحكم في ازدحام TCP تحسينات راكمها عبر عقود؛ ويستفيد NTCP من ذلك عبر مكدسات TCP الناضجة.
- قد تعكس مكاسب الكفاءة الملحوظة عند تفضيل SSU سلوك الاصطفاف في router بدلاً من مزايا جوهرية للبروتوكول.
- كانت streaming timeouts (مهلات البث) الأكبر تُحسِّن الاستقرار بالفعل؛ وشُجِّع إجراء مزيد من الرصد وجمع البيانات قبل إدخال تغييرات كبرى.

أسهم النقاش في صقل ضبط بروتوكولات النقل اللاحق، لكنه لا يعكس المعمارية الحديثة لـ NTCP2/SSU2.
