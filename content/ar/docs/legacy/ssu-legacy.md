---
title: "نقل SSU (مهمل)"
description: "نقل UDP الأصلي المستخدم قبل SSU2"
slug: "ssu"
lastUpdated: "2024-01"
accurateFor: "0.9.61"
type: docs
reviewStatus: "needs-review"
---

> **مهمل:** SSU (بروتوكول UDP آمن شبه موثوق) تم استبداله بـ[SSU2](/docs/specs/ssu2/). أزالت Java I2P SSU في الإصدار 2.4.0 (API 0.9.61)، وأزالته i2pd في 2.44.0 (API 0.9.56). يُحتفَظ بهذا المستند لأغراض مرجعية تاريخية فقط.

## أبرز النقاط

- نقل عبر UDP يوفّر تسليمًا مشفّرًا ومُصادقًا عليه من نقطة إلى نقطة لرسائل I2NP.
- اعتمد على مصافحة Diffie–Hellman بطول 2048 بت (نفس العدد الأوّلي المستخدم في ElGamal).
- حمل كل داتاغرام HMAC-MD5 بحجم 16 بايت (صيغة مُقتطعة غير قياسية) + IV بحجم 16 بايت، تليه حمولة مشفّرة باستخدام AES-256-CBC.
- يُجرى تتبّع منع هجمات الإعادة وحالة الجلسة داخل الحمولة المشفّرة.

## رأس الرسالة

```
[16-byte MAC][16-byte IV][encrypted payload]
```
حساب MAC (رمز تحقق الرسالة) المستخدم: `HMAC-MD5(ciphertext || IV || (len ^ version ^ ((netid-2)<<8)))` باستخدام مفتاح MAC بطول 32 بايت. كان طول الحمولة بتنسيق الكبير أولاً (big-endian) بطول 16-بت، ويُضاف ضمن عملية احتساب MAC. كان الإصدار الافتراضي للبروتوكول `0`؛ وكانت القيمة الافتراضية لـ netId `2` (الشبكة الرئيسية).

## مفاتيح الجلسة ومفاتيح MAC (رمز مصادقة الرسالة)

مشتقة من السر المشترك لـ DH (ديفي-هيلمان):

1. حوّل القيمة المشتركة إلى مصفوفة بايتات big-endian (ترتيب البايتات من الأكثر أهمية أولاً) (أضف `0x00` في المقدمة إذا كان البت الأعلى مضبوطًا).
2. مفتاح الجلسة: أول 32 بايتًا (استكمل بأصفار إذا كان أقصر).
3. مفتاح MAC: البايتات 33–64؛ إن لم تكفِ، فارجع إلى تجزئة SHA-256 للقيمة المشتركة.

## الحالة

لم تعد Routers تعلن عن عناوين SSU. ينبغي على العملاء الانتقال إلى بروتوكولات النقل SSU2 أو NTCP2. يمكن العثور على تنفيذات سابقة في الإصدارات الأقدم:

- مصادر Java قبل الإصدار 2.4.0 ضمن `router/transport/udp`
- مصادر i2pd قبل الإصدار 2.44.0

للاطلاع على السلوك الحالي لنقل UDP، راجع [مواصفة SSU2](/docs/specs/ssu2/).
