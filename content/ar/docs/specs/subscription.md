---
title: "أوامر خلاصة اشتراك العناوين"
description: "امتداد لتغذيات الاشتراك بالعناوين يتيح لمالكي أسماء المضيف تحديث سجلاتهم وإدارتها"
slug: "subscription"
lastUpdated: "2025-10"
accurateFor: "I2P 2.10.0"
---

## نظرة عامة

توسّع هذه المواصفة موجز اشتراك العناوين بإضافة أوامر، مما يمكّن خوادم الأسماء من بثّ تحديثات الإدخالات من مالكي أسماء المضيف. طُرحت أصلاً في [Proposal 112](/proposals/112-addressbook-subscription-feed-commands/) (سبتمبر 2014)، ونُفِّذت في الإصدار 0.9.26 (يونيو 2016)، ونُشرت على مستوى الشبكة بحالة CLOSED.

ظلّ النظام مستقرًا دون تغيير منذ تنفيذه الأولي، وما يزال يعمل بالطريقة نفسها في I2P 2.10.0 (Router API 0.9.65، سبتمبر 2025).

## الدوافع

في السابق، كانت خوادم الاشتراك الخاصة بـ hosts.txt ترسل البيانات فقط بتنسيق hosts.txt بسيط:

```
example.i2p=b64destination
```
أدى هذا التنسيق الأساسي إلى عدة مشكلات:

- لا يستطيع حاملو أسماء المضيفين تحديث Destination (عنوان الوجهة في I2P) المرتبطة بأسماء مضيفيهم (على سبيل المثال، لترقية مفتاح التوقيع إلى نوعٍ تشفيري أقوى).
- لا يستطيع حاملو أسماء المضيفين التخلّي عن أسمائهم بشكلٍ اعتباطي. يجب عليهم تسليم المفاتيح الخاصة بـ Destination المقابلة مباشرةً إلى الحامل الجديد.
- لا توجد وسيلة لتوثيق أن نطاقاً فرعياً يخضع لسيطرة اسم المضيف الأساسي المقابل. يُطبَّق هذا حالياً فقط بشكلٍ فردي من قِبل بعض خوادم الأسماء.

## التصميم

تضيف هذه المواصفة أسطر أوامر إلى تنسيق hosts.txt. وباستخدام هذه الأوامر، يمكن لخوادم الأسماء توسيع خدماتها لتقديم ميزات إضافية. ويمكن للعملاء الذين ينفّذون هذه المواصفة ترقّب هذه الميزات عبر عملية الاشتراك الاعتيادية.

يجب توقيع جميع أسطر الأوامر من قِبل Destination المناظرة (هوية الوجهة في I2P). وهذا يضمن أن تُجرى التغييرات فقط بناءً على طلب مالك اسم المضيف.

## التداعيات الأمنية

هذه المواصفة لا تؤثر على إخفاء الهوية.

هناك زيادة في المخاطر المرتبطة بفقدان السيطرة على مفتاح Destination (الوجهة في I2P)، إذ إن من يحصل عليه يمكنه استخدام هذه الأوامر لإجراء تغييرات على أي أسماء مضيفين مرتبطة بها. ومع ذلك، فهذه ليست مشكلة أكبر من الوضع القائم، حيث يمكن لمن يحصل على Destination انتحال اسم مضيف والسيطرة (جزئياً) على حركة المرور الخاصة به. ويقابل هذا الخطر المتزايد منح مالكي أسماء المضيفين القدرة على تغيير الـ Destination المرتبطة باسم مضيف في حال اعتقدوا أن الـ Destination قد تعرضت للاختراق. وهذا غير ممكن في النظام الحالي.

## المواصفات

### أنواع السطور الجديدة

هناك نوعان جديدان من الأسطر:

1. **أوامر الإضافة والتغيير:**

```
example.i2p=b64destination#!key1=val1#key2=val2...
```
2. **إزالة الأوامر:**

```
#!key1=val1#key2=val2...
```
#### الترتيب

ليس الموجز بالضرورة مرتبا أو مكتملا. على سبيل المثال، قد يظهر أمر change في سطر قبل أمر add، أو من دون وجود أمر add.

يمكن أن تأتي المفاتيح بأي ترتيب. لا يُسمح بوجود مفاتيح مكررة. جميع المفاتيح والقيم حساسة لحالة الأحرف.

### المفاتيح الشائعة

**مطلوب في جميع الأوامر:**

**sig** : توقيع Base64، باستخدام مفتاح التوقيع من الوجهة

**إشارات إلى اسم مضيف ثانٍ و/أو وجهة:**

**oldname** : اسم مضيف ثانٍ (جديد أو مُعدَّل)

**olddest** : وجهة Base64 ثانية (جديدة أو معدّلة)

**oldsig** : توقيع Base64 ثانٍ، باستخدام مفتاح التوقيع من olddest

**مفاتيح شائعة أخرى:**

**إجراء** : أمر

**name** : اسم المضيف، يظهر فقط إذا لم يسبقه `example.i2p=b64dest`

**dest** : الوجهة بصيغة Base64، توجد فقط إذا لم يسبقها `example.i2p=b64dest`

**date** : بالثواني منذ epoch (بداية 1 يناير/كانون الثاني 1970 بالتوقيت العالمي المنسق UTC)

**expires** : بالثواني منذ epoch (بداية وقت يونكس)

### الأوامر

يجب أن تحتوي جميع الأوامر، باستثناء الأمر "Add"، على زوج مفتاح/قيمة `action=command`.

لأغراض التوافق مع العملاء الأقدم، تسبق معظم الأوامر بـ `example.i2p=b64dest`، كما هو مذكور أدناه. وبالنسبة للتغييرات، تُعرض دائمًا القيم الجديدة. وأي قيم قديمة تُدرج في قسم المفتاح/القيمة.

المفاتيح المُدرجة مطلوبة. قد تحتوي جميع الأوامر على عناصر مفتاح/قيمة إضافية غير معرّفة هنا.

#### إضافة اسم المضيف

**مسبوق بـ example.i2p=b64dest** : نعم، هذا هو اسم المضيف والوجهة الجديدان.

**action** : غير مُتضمَّنة، فهي مفهومة ضمناً.

**sig** : توقيع

مثال:

```
example.i2p=b64dest#!sig=b64sig
```
#### تغيير اسم المضيف

**مسبوق بـ example.i2p=b64dest** : نعم، هذا هو اسم المضيف الجديد والوجهة القديمة.

**الإجراء** : changename

**oldname** : اسم المضيف القديم، ليتم استبداله

**sig** : توقيع

مثال:

```
example.i2p=b64dest#!action=changename#oldname=oldhostname#sig=b64sig
```
#### تغيير الوجهة

**مسبوق بـ example.i2p=b64dest** : نعم، هذا هو اسم المضيف القديم والوجهة الجديدة.

**action** : changedest

**olddest** : الوجهة القديمة المراد استبدالها

**oldsig** : توقيع باستخدام olddest

**sig** : التوقيع

مثال:

```
example.i2p=b64dest#!action=changedest#olddest=oldb64dest#oldsig=b64sig#sig=b64sig
```
#### إضافة اسم مستعار لاسم المضيف

**مسبوق بـ example.i2p=b64dest** : نعم، هذا هو اسم المضيف الجديد (اسم مستعار) والوجهة القديمة.

**إجراء** : addname

**oldname** : اسم المضيف القديم

**sig** : توقيع

مثال:

```
example.i2p=b64dest#!action=addname#oldname=oldhostname#sig=b64sig
```
#### إضافة اسم مستعار للوجهة

(تُستخدم لترقية التشفير)

**مسبوق بـ example.i2p=b64dest** : نعم، هذا هو اسم المضيف القديم والوجهة الجديدة (البديلة).

**الإجراء** : adddest

**olddest** : الوجهة القديمة

**oldsig** : توقيع باستخدام olddest

**sig** : توقيع باستخدام dest

مثال:

```
example.i2p=b64dest#!action=adddest#olddest=oldb64dest#oldsig=b64sig#sig=b64sig
```
#### إضافة نطاق فرعي

**مسبوق بـ subdomain.example.i2p=b64dest** : نعم، هذا هو اسم النطاق الفرعي والوجهة الجديدان.

**الإجراء** : addsubdomain

**oldname** : اسم المضيف ذو المستوى الأعلى (example.i2p)

**olddest** : الوجهة ذات المستوى الأعلى (على سبيل المثال example.i2p)

**oldsig** : توقيع باستخدام olddest

**sig** : توقيع باستخدام dest

مثال:

```
subdomain.example.i2p=b64dest#!action=addsubdomain#oldname=example.i2p#olddest=oldb64dest#oldsig=b64sig#sig=b64sig
```
#### تحديث البيانات الوصفية

**مسبوق بـ example.i2p=b64dest** : نعم، هذا هو اسم المضيف والوجهة القديمان.

**إجراء** : تحديث

**sig** : توقيع

(أضف أي مفاتيح مُحدَّثة هنا)

مثال:

```
example.i2p=b64dest#!action=update#k1=v1#k2=v2#sig=b64sig
```
#### إزالة اسم المضيف

**مسبوق بـ example.i2p=b64dest** : لا، هذه تُحدَّد في الخيارات

**الإجراء** : إزالة

**الاسم** : اسم المضيف

**dest** : الوجهة

**sig** : التوقيع

مثال:

```
#!action=remove#name=example.i2p#dest=b64dest#sig=b64sig
```
#### إزالة الكل المرتبط بهذه الوجهة

**يُسبق بـ example.i2p=b64dest** : لا، هذه تُحدد في الخيارات

**action** : removeall

**dest** : الوجهة

**sig** : توقيع

مثال:

```
#!action=removeall#dest=b64dest#sig=b64sig
```
### التواقيع

يجب أن تُوقَّع جميع الأوامر من قِبل الوجهة المقابلة. قد تتطلب الأوامر ذات الوجهتين توقيعين.

`oldsig` هي دائمًا "التوقيع الداخلي". وقّع وتحقّق من دون وجود أيٍ من مفتاحي `oldsig` أو `sig`. `sig` هو دائمًا "التوقيع الخارجي". وقّع وتحقّق مع وجود مفتاح `oldsig` ولكن من دون وجود مفتاح `sig`.

#### مدخلات التواقيع

لإنتاج تيار بايت بغرض إنشاء التوقيع أو التحقق منه، قم بتسلسل البيانات كما يلي:

1. أزِل مفتاح `sig`
2. إذا كان التحقق باستخدام `oldsig`، فأزِل أيضًا مفتاح `oldsig`
3. بالنسبة لأوامر Add أو Change فقط، أخرج `example.i2p=b64dest`
4. إذا بقيت أي مفاتيح، فأخرج `#!`
5. رتّب الخيارات حسب مفتاح UTF-8، وافشل إذا وُجدت مفاتيح مكررة
6. لكل زوج مفتاح/قيمة، أخرج `key=value`، يتبعه (إذا لم يكن زوج المفتاح/القيمة الأخير) علامة `#`

**ملاحظات**

- لا تُخرج سطرًا جديدًا
- ترميز الإخراج هو UTF-8
- يكون ترميز جميع الوجهات والتواقيع بصيغة Base 64 باستخدام أبجدية I2P
- المفاتيح والقيم حسّاسة لحالة الأحرف
- يجب أن تكون أسماء المضيفين بأحرف صغيرة

#### أنواع التواقيع الحالية

اعتبارًا من I2P 2.10.0، الأنواع التالية من التواقيع مدعومة للوجهات:

- **EdDSA_SHA512_Ed25519** (Type 7): الأكثر شيوعًا للوجهات منذ 0.9.15. يستخدم مفتاحًا عامًا بطول 32 بايت وتوقيعًا بطول 64 بايت. هذا هو نوع التوقيع الموصى به للوجهات الجديدة.
- **RedDSA_SHA512_Ed25519** (Type 13): متاح للوجهات وleasesets (leaseSet: مجموعة عناوين الإيجار في I2P) المشفّرة فقط (منذ 0.9.39).
- الأنواع القديمة (DSA_SHA1، ومتغيرات ECDSA): لا تزال مدعومة لكنها مُهمّلة للاستخدام في Router Identities (هويات الـ Router في I2P) الجديدة اعتبارًا من 0.9.58.

ملاحظة: تتوفر خيارات التشفير ما بعد الكم اعتبارًا من I2P 2.10.0، لكنها ليست بعد أنواع التوقيع الافتراضية.

## التوافق

تُنفَّذ جميع الأسطر الجديدة في تنسيق hosts.txt باستخدام أحرف التعليق البادئة (`#!`)، لذا ستُفسِّر جميع إصدارات I2P الأقدم الأوامر الجديدة على أنها تعليقات وتتجاهلها بسلاسة.

عندما تقوم I2P routers بالتحديث إلى المواصفة الجديدة، لن تعيد تفسير التعليقات القديمة، لكنها ستبدأ بالاستماع إلى الأوامر الجديدة خلال عمليات الجلب اللاحقة لخلاصات اشتراكها. لذا من المهم أن تقوم خوادم الأسماء بالاحتفاظ بإدخالات الأوامر بطريقة ما، أو تمكين دعم ETag (معرّف تمييز النسخة في HTTP) حتى تتمكن routers من جلب جميع الأوامر السابقة.

## حالة التنفيذ

**النشر الأولي:** الإصدار 0.9.26 (7 يونيو 2016)

**الحالة الحالية:** مستقرة ولم تتغير حتى الإصدار I2P 2.10.0 (Router API 0.9.65، سبتمبر 2025)

**حالة المقترح:** مغلق (تم نشره بنجاح على مستوى الشبكة)

**موضع التنفيذ:** `apps/addressbook/java/src/net/i2p/addressbook/` في الـ router (الموجّه) الخاص بـ I2P والمكتوب بلغة Java

**الفئات الرئيسية:** - `SubscriptionList.java`: يدير معالجة الاشتراكات - `Subscription.java`: يتعامل مع خلاصات الاشتراك الفردية - `AddressBook.java`: الوظائف الأساسية لدفتر العناوين - `Daemon.java`: خدمة الخلفية لدفتر العناوين

**عنوان URL الافتراضي للاشتراك:** `http://i2p-projekt.i2p/hosts.txt`

## تفاصيل النقل

تستخدم الاشتراكات HTTP مع دعم GET الشرطي:

- **ترويسة ETag:** تدعم كشف التغييرات بكفاءة
- **ترويسة Last-Modified:** تتعقب أوقات تحديث الاشتراكات
- **304 Not Modified:** ينبغي للخوادم إرجاع هذه الحالة عندما لم يتغير المحتوى
- **Content-Length:** يُوصى بها بشدة لجميع الاستجابات

يستخدم I2P router سلوك عميل HTTP القياسي مع دعم مناسب للتخزين المؤقت.

## سياق الإصدار

**ملاحظة حول ترقيم إصدارات I2P:** ابتداءً من الإصدار 1.5.0 تقريبًا (أغسطس 2021)، انتقلت I2P من ترقيم 0.9.x إلى الترقيم الدلالي (1.x، 2.x، إلخ). ومع ذلك، يواصل الإصدار الداخلي لـ Router API استخدام ترقيم 0.9.x حفاظًا على التوافق مع الإصدارات السابقة. اعتبارًا من أكتوبر 2025، الإصدار الحالي هو I2P 2.10.0 مع إصدار Router API 0.9.65.

كُتبت وثيقة المواصفات هذه في الأصل للإصدار 0.9.49 (فبراير 2021)، ولا تزال دقيقة تمامًا بالنسبة للإصدار الحالي 0.9.65 (I2P 2.10.0)، لأن نظام خلاصات الاشتراك لم يطرأ عليه أي تغيير منذ تنفيذه الأصلي في 0.9.26.

## المراجع

- [المقترح 112 (الأصلي)](/proposals/112-addressbook-subscription-feed-commands/)
- [المواصفة الرسمية](/docs/specs/subscription/)
- [توثيق نظام التسمية في I2P](/docs/overview/naming/)
- [مواصفة البُنى المشتركة](/docs/specs/common-structures/)
- [مستودع الشيفرة المصدرية لـ I2P](https://github.com/i2p/i2p.i2p)
- [مستودع I2P على Gitea](https://i2pgit.org/I2P_Developers/i2p.i2p)

## التطورات ذات الصلة

على الرغم من أن نظام خلاصات الاشتراك نفسه لم يتغير، قد تكون التطورات التالية ذات الصلة في البنية التحتية للتسمية الخاصة بـ I2P محل اهتمام:

- **أسماء Base32 الموسّعة** (0.9.40+): دعم عناوين base32 بطول 56+ محرفًا لـ leaseSets المُشفّرة. لا يؤثر في صيغة موجز الاشتراك.
- **تسجيل نطاق المستوى الأعلى .i2p.alt (TLD)** (RFC 9476، أواخر 2023): تسجيل رسمي لدى GANA لـ .i2p.alt بوصفه TLD بديلًا. قد تزيل تحديثات router المستقبلية لاحقة .alt، لكن لا تتطلب أوامر الاشتراك أي تغييرات.
- **التشفير ما بعد الكمّ** (2.10.0+): متاح لكنه ليس الإعداد الافتراضي. سيُنظر مستقبلاً في خوارزميات التوقيع ضمن خلاصات الاشتراك.
