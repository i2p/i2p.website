---
title: "الأداء"
description: "أداء شبكة I2P: كيف تعمل اليوم، التحسينات التاريخية، وأفكار للضبط المستقبلي"
slug: "performance"
lastUpdated: "2025-10"
accurateFor: "2.10.0"
reviewStatus: "needs-review"
---

## أداء شبكة I2P: السرعة والاتصالات وإدارة الموارد

شبكة I2P ديناميكية بالكامل. كل عميل معروف للعقد الأخرى ويختبر العقد المعروفة محلياً من حيث إمكانية الوصول والقدرة. يتم حفظ العقد القابلة للوصول والقادرة فقط في NetDB محلية. أثناء عملية بناء الأنفاق، يتم اختيار أفضل الموارد من هذا المجمع لبناء الأنفاق. نظراً لأن الاختبار يحدث بشكل مستمر، فإن مجمع العقد يتغير. كل عقدة I2P تعرف جزءاً مختلفاً من NetDB، مما يعني أن كل router لديه مجموعة مختلفة من عقد I2P التي يمكن استخدامها للأنفاق. حتى لو كان لدى اثنين من routers نفس المجموعة الفرعية من العقد المعروفة، فمن المحتمل أن تظهر اختبارات إمكانية الوصول والقدرة نتائج مختلفة، حيث يمكن أن تكون routers الأخرى تحت حمل تشغيلي في الوقت الذي يختبر فيه router واحد، ولكنها تكون حرة عندما يختبر router الثاني.

يصف هذا سبب امتلاك كل عقدة I2P عقدات مختلفة لبناء الأنفاق (tunnels). نظرًا لأن كل عقدة I2P لديها زمن استجابة (latency) وعرض نطاق (bandwidth) مختلفين، فإن الأنفاق (tunnels) (التي يتم بناؤها عبر تلك العقد) لها قيم زمن استجابة وعرض نطاق مختلفة. ولأن كل عقدة I2P لديها أنفاق مختلفة تم بناؤها، لا توجد عقدتا I2P لهما نفس مجموعات الأنفاق.

يُعرف الخادم/العميل باسم "destination" ولكل destination نفق وارد واحد على الأقل ونفق صادر واحد. الإعداد الافتراضي هو 3 قفزات لكل نفق. وهذا يصل إلى 12 قفزة (12 عقدة I2P مختلفة) لرحلة ذهاب وإياب كاملة عميل ← خادم ← عميل.

يتم إرسال كل حزمة بيانات عبر 6 عُقد I2P أخرى حتى تصل إلى الخادم:

client - hop1 - hop2 - hop3 - hopa1 - hopa2 - hopa3 - server

وفي طريق العودة 6 عُقد I2P مختلفة:

server - hopb1 - hopb2 - hopb3 - hopc1 - hopc2 - hopc3 - client

حركة المرور على الشبكة تحتاج إلى إقرار استلام (ACK) قبل إرسال بيانات جديدة؛ تحتاج إلى الانتظار حتى يعود ACK من الخادم: إرسال البيانات، الانتظار للحصول على ACK، إرسال المزيد من البيانات، الانتظار للحصول على ACK. نظرًا لأن RTT (Round Trip Time - وقت الذهاب والإياب) يتراكم من زمن الاستجابة لكل عقدة I2P فردية ولكل اتصال في رحلة الذهاب والإياب هذه، فإنه يستغرق عادةً من 1 إلى 3 ثوانٍ حتى يعود ACK إلى العميل. بسبب تصميم TCP ونقل I2P، تكون حزمة البيانات ذات حجم محدود. معًا، تضع هذه الشروط حدًا أقصى للنطاق الترددي لكل tunnel بحوالي 20-50 كيلوبايت/ثانية. ومع ذلك، إذا كان لقفزة واحدة فقط في الـ tunnel نطاق ترددي قدره 5 كيلوبايت/ثانية فقط للإنفاق، فإن الـ tunnel بأكمله يقتصر على 5 كيلوبايت/ثانية، بغض النظر عن زمن الاستجابة والقيود الأخرى.

التشفير والكمون وكيفية بناء النفق يجعله مكلفًا جدًا من حيث وقت المعالج لبناء نفق. لهذا السبب يُسمح للوجهة بأن يكون لديها حد أقصى 6 أنفاق واردة و6 أنفاق صادرة لنقل البيانات. مع حد أقصى 50 كيلوبايت/ثانية لكل نفق، يمكن للوجهة استخدام ما يقارب 300 كيلوبايت/ثانية من حركة البيانات المجمعة (في الواقع يمكن أن يكون أكثر إذا تم استخدام أنفاق أقصر مع عدم إخفاء الهوية منخفض أو معدوم). يتم التخلص من الأنفاق المستخدمة كل 10 دقائق ويتم بناء أنفاق جديدة. هذا التغيير في الأنفاق، وأحيانًا العملاء الذين يتم إيقاف تشغيلهم أو يفقدون اتصالهم بالشبكة، سيؤدي في بعض الأحيان إلى كسر الأنفاق والاتصالات. يمكن رؤية مثال على ذلك في شبكة IRC2P في فقدان الاتصال (ping timeout) أو عند استخدام eepget.

مع مجموعة محدودة من الوجهات ومجموعة محدودة من الأنفاق لكل وجهة، يستخدم عقدة I2P واحدة مجموعة محدودة فقط من الأنفاق عبر عقد I2P الأخرى. على سبيل المثال، إذا كانت عقدة I2P هي "hop1" في المثال الصغير أعلاه، فإنها ترى فقط نفقًا مشاركًا واحدًا ينشأ من العميل. إذا جمعنا شبكة I2P بأكملها، يمكن بناء عدد محدود نسبيًا فقط من الأنفاق المشاركة بكمية محدودة من النطاق الترددي مجتمعة. إذا وزعنا هذه الأعداد المحدودة على عدد عقد I2P، فلن يكون هناك سوى جزء بسيط من النطاق الترددي/السعة المتاحة للاستخدام.

للبقاء مجهول الهوية، يجب ألا يُستخدم router واحد من قبل الشبكة بأكملها لبناء الأنفاق. إذا كان router واحد يعمل كـ tunnel router لجميع عُقد I2P، فإنه يصبح نقطة فشل مركزية حقيقية بالإضافة إلى نقطة مركزية لجمع عناوين IP والبيانات من العملاء. لهذا السبب تقوم الشبكة بتوزيع حركة المرور عبر العُقد في عملية بناء الأنفاق.

اعتبار آخر للأداء هو الطريقة التي يتعامل بها I2P مع الشبكات الشبكية. كل قفزة اتصال من عقدة إلى أخرى تستخدم اتصال TCP أو UDP واحد على عقد I2P. مع 1000 اتصال، يرى المرء 1000 اتصال TCP. هذا عدد كبير جداً، وبعض أجهزة التوجيه المنزلية والمكتبية الصغيرة تسمح فقط بعدد صغير من الاتصالات. يحاول I2P الحد من هذه الاتصالات إلى أقل من 1500 لكل نوع UDP و TCP. هذا يحد من كمية البيانات المنقولة عبر عقدة I2P أيضاً.

إذا كان العقدة قابلة للوصول، ولديها إعداد عرض نطاق >128 كيلوبايت/ثانية مشترك وقابلة للوصول على مدار الساعة طوال أيام الأسبوع، فيجب استخدامها بعد بعض الوقت لحركة المرور المشاركة. إذا كانت متوقفة في ما بينهما، فإن اختبار عقدة I2P الذي تقوم به العقد الأخرى سيخبرهم أنها غير قابلة للوصول. هذا يحظر العقدة لمدة 24 ساعة على الأقل على العقد الأخرى. لذلك، العقد الأخرى التي اختبرت تلك العقدة على أنها متوقفة لن تستخدم تلك العقدة لمدة 24 ساعة لبناء الأنفاق. هذا هو السبب في أن حركة المرور الخاصة بك تكون أقل بعد إعادة التشغيل/الإيقاف لموجه I2P الخاص بك لمدة لا تقل عن 24 ساعة.

بالإضافة إلى ذلك، تحتاج عُقد I2P الأخرى إلى معرفة router I2P لاختباره من حيث إمكانية الوصول والسعة. يمكن تسريع هذه العملية عند التفاعل مع الشبكة، على سبيل المثال باستخدام التطبيقات أو زيارة مواقع I2P، مما سيؤدي إلى المزيد من بناء الأنفاق وبالتالي المزيد من النشاط وإمكانية الوصول للاختبار من قبل العُقد على الشبكة.

## سجل الأداء (مختارات)

على مر السنين، شهد I2P عدداً من تحسينات الأداء البارزة:

### Native math

تم التنفيذ عبر روابط JNI إلى مكتبة GNU MP (GMP) لتسريع عملية `modPow` في BigInteger، والتي كانت تستهلك معظم وقت المعالج سابقاً. أظهرت النتائج الأولية تسريعاً ملحوظاً في تشفير المفتاح العام. انظر: /misc/jbigi/

### Garlic wrapping a "reply" LeaseSet (tuned)

في السابق، كانت الردود تتطلب غالبًا البحث في قاعدة بيانات الشبكة عن LeaseSet الخاص بالمرسل. يؤدي تضمين LeaseSet الخاص بالمرسل في garlic الأولي إلى تحسين زمن استجابة الرد. يتم ذلك الآن بشكل انتقائي (بداية الاتصال أو عند تغيير LeaseSet) لتقليل النفقات الإضافية.

### الرياضيات الأصلية

تم نقل بعض خطوات التحقق إلى مرحلة أبكر في مصافحة transport لرفض العقد السيئة بشكل أسرع (الساعات الخاطئة، NAT/جدار الحماية السيئ، الإصدارات غير المتوافقة)، مما يوفر المعالج وعرض النطاق الترددي.

### تغليف LeaseSet "الرد" بتقنية Garlic (محسّن)

استخدم اختبار الأنفاق الواعي بالسياق: تجنب اختبار الأنفاق المعروفة بالفعل بأنها تمرر البيانات؛ فضّل الاختبار عندما تكون خاملة. هذا يقلل من العبء ويسرّع اكتشاف الأنفاق الفاشلة.

### رفض TCP أكثر كفاءة

الاحتفاظ بالاختيارات لاتصال معين يقلل من التسليم خارج الترتيب ويسمح لمكتبة البث بزيادة أحجام النوافذ، مما يحسن الإنتاجية.

### تعديلات اختبار الأنفاق (Tunnel)

GZip أو ما شابه للهياكل الطويلة (على سبيل المثال، خيارات RouterInfo) يقلل من عرض النطاق الترددي عند الاقتضاء.

### اختيار النفق/الإيجار الثابت

بديل لبروتوكول "ministreaming" البسيط. يتضمن streaming الحديث إقرارات استلام انتقائية (selective ACKs) والتحكم في الازدحام المصمم خصيصاً لبيئة I2P المجهولة الموجهة للرسائل. انظر: /docs/api/streaming/

## Future Performance Improvements (historical ideas)

فيما يلي أفكار موثقة تاريخياً كتحسينات محتملة. العديد منها أصبح قديماً، أو تم تنفيذه، أو تم استبداله بتغييرات معمارية.

### ضغط هياكل البيانات المحددة

تحسين كيفية اختيار أجهزة التوجيه للنظراء عند بناء الأنفاق لتجنب الأجهزة البطيئة أو المثقلة بالأحمال، مع الحفاظ على المقاومة ضد هجمات Sybil من قبل خصوم أقوياء.

### بروتوكول البث الكامل

قلل الاستكشاف غير الضروري عندما تكون مساحة المفاتيح مستقرة؛ اضبط عدد الأقران المُرجعة في عمليات البحث وعدد عمليات البحث المتزامنة التي يتم تنفيذها.

### Session Tag tuning and improvements (legacy)

بالنسبة لمخطط ElGamal/AES+SessionTag القديم، تؤدي استراتيجيات الانتهاء والتجديد الأكثر ذكاءً إلى تقليل العودة إلى ElGamal وتقليل الـ tags المهدرة.

### تحسين تحليل واختيار النظراء

إنشاء العلامات من PRNG متزامن يتم إنشاؤه أثناء إنشاء جلسة جديدة، مما يقلل من العبء لكل رسالة مقارنة بالعلامات المسلمة مسبقاً.

### ضبط قاعدة بيانات الشبكة

فترات حياة أطول للأنفاق (tunnel) مقترنة بالإصلاح التلقائي (healing) يمكن أن تقلل من أعباء إعادة البناء؛ مع الموازنة بين عدم الكشف عن الهوية والموثوقية.

### ضبط وتحسينات علامة الجلسة (Session Tag) (قديم)

رفض النظراء غير الصالحين مبكرًا وجعل اختبارات الأنفاق أكثر وعيًا بالسياق لتقليل التنافس والكمون.

### ترحيل SessionTag إلى PRNG متزامن (قديم)

تجميع LeaseSet الانتقائي، وخيارات RouterInfo المضغوطة، واعتماد بروتوكول البث الكامل، كلها تساهم في تحسين الأداء الملموس.

---

انظر أيضاً:

- [توجيه الأنفاق (Tunnel Routing)](/docs/overview/tunnel-routing/)
- [اختيار النظراء (Peer Selection)](/docs/overview/tunnel-routing/)
- [بروتوكولات النقل (Transports)](/docs/overview/transport/)
- [مواصفات SSU2](/docs/specs/ssu2/) و [مواصفات NTCP2](/docs/specs/ntcp2/)
