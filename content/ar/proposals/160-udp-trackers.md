```markdown
---
title: "المتعقبون UDP"
number: "160"
author: "zzz"
created: "2022-01-03"
lastupdated: "2025-06-25"
status: "مغلق"
thread: "http://zzz.i2p/topics/1634"
target: "0.9.67"
---

## الحالة

تمت الموافقة في المراجعة بتاريخ 2025-06-24.
المواصفات موجودة في [UDP specification](/en/docs/spec/udp-bittorrent-announces/).
تمت التنفيذ في zzzot 0.20.0-beta2.
تمت التنفيذ في i2psnark اعتبارًا من API 0.9.67.
تحقق من الوثائق لتنفيذات أخرى لحالة تقدمها.

## نظرة عامة

هذا الاقتراح لتمفيذ متعقبين UDP في I2P.

### تاريخ التغيير

تم نشر اقتراح أولي للمتعقبين UDP في I2P على صفحة مواصفات البتورنت الخاصة بنا [/en/docs/applications/bittorrent/](/en/docs/applications/bittorrent/) في مايو 2014؛ سبق هذا عمليتنا الرسمية للاقتراح، ولم يتم تنفيذه أبدًا. تم إنشاء هذا الاقتراح في أوائل عام 2022 ويُبسط النسخة 2014.

نظرًا لأن هذا الاقتراح يعتمد على حزم البيانات القابلة للتكرار، فقد تم إيقافه بمجرد أن بدأنا العمل على اقتراح Datagram2 [/en/proposals/163-datagram2/](/en/proposals/163-datagram2/) في أوائل عام 2023. تمت الموافقة على ذلك الاقتراح في أبريل 2025.

حددت نسخة 2023 من هذا الاقتراح وضعين، "التوافق" و"السريع". أظهرت مزيد من التحليل أن الوضع السريع سيكون غير آمن وسيكون غير فعال أيضًا للعملاء الذين لديهم عدد كبير من السيول. علاوة على ذلك، أشار BiglyBT إلى تفضيل لوضع التوافق. سيكون من الأسهل تنفيذ هذا الوضع لأي متعقب أو عميل يدعم [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) القياسية.

بينما يعد وضع التوافق أكثر تعقيدًا للتنفيذ من البداية من جانب العميل، إلا أن لدينا كود أولي تم البدء فيه في عام 2023.

لذلك، تم تبسيط النسخة الحالية هنا لإزالة الوضع السريع، وإزالة مصطلح "التوافق". النسخة الحالية تتحول إلى تنسيق Datagram2 الجديد، وتضيف إشارات إلى بروتوكول توسيع الإعلان UDP [BEP 41](http://www.bittorrent.org/beps/bep_0041.html).

أيضًا، يتم إضافة حقل عمر معرف الاتصال إلى استجابة الاتصال، لتمديد المكاسب في الكفاءة من هذا البروتوكول.

## الدافع

بينما يستمر عدد المستخدمين عمومًا وعدد مستخدمي البتورنت خصوصًا في النمو، نحتاج إلى جعل المتعقبين والإعلانات أكثر كفاءة حتى لا يتم إغراق المتعقبين.

اقترح البتورنت متعقبين UDP في BEP 15 [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) في عام 2008، وأغلبية المتعقبين الآن على الإنترنت الواضح هم الآن للـ UDP فقط.

يصعب حساب توفير عرض النطاق الترددي بين حزم البيانات مقابل بروتوكول التدفق. الطلب القابل للتكرار يكون بحجم مماثل لسيل SYN، ولكن الحمولة أقل بحوالي 500 بايت لأن طلب GET في HTTP يحتوي على سلسلة بارامترات عنوان URL كبيرة تبلغ 600 بايت. الرد الخام أصغر بكثير من سيل SYN ACK، مما يحقق تقليلًا كبيرًا في حركة المرور الصادرة للمتعقب.

بالإضافة إلى ذلك، يجب أن تكون هناك تخفيضات في الذاكرة خاصة بالتنفيذ، حيث تتطلب حزم البيانات حالة أقل بكثير في الذاكرة مقارنة باتصال التدفق.

سوف يزيد التشفير والتوقيعات بعد الكم، كما يتم تخيله في [Prop169]، بشكل كبير من العبء على الهياكل المشفرة والموقعة، بما في ذلك الوجهات وsets الإيجار وSYN للتدفق وSYN ACK. من المهم تقليل هذا العبء حيثما أمكن قبل تبني التشفير بعد الكم في I2P.

## التصميم

يستخدم هذا الاقتراح Datagram2 القابل للتكرار، Datagram3 القابل للتكرار، وحزم البيانات الخام، كما هو محدد في [/en/docs/spec/datagrams/](/en/docs/spec/datagrams/). Datagram2 وDatagram3 هما نسخ جديدة من حزم البيانات القابلة للتكرار، كما هو محدد في اقتراح 163 [/en/proposals/163-datagram2/](/en/proposals/163-datagram2/). يضيف Datagram2 مقاومة التكرار ودعم التوقيع غير المتصل. Datagram3 أصغر من تنسيق datagram القديم، ولكن بدون التحقق.

### BEP 15

للإشارة، فإن تدفق الرسائل المحدد في [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) هو كما يلي:

```
العميل                        المتعقب
    طلب الاتصال ------------->
      <-------------- استجابة الاتصال.
    طلب الإعلان ------------->
      <-------------- استجابة الإعلان.
    طلب الإعلان ------------->
      <-------------- استجابة الإعلان.
```

مرحلة الاتصال مطلوبة لمنع انتحال عنوان IP. يعيد المتعقب معرف الاتصال الذي يستخدمه العميل في الإعلانات اللاحقة. ينتهي صلاحية معرف الاتصال افتراضيًا في دقيقة واحدة في العميل، وفي دقيقتين في المتعقب.

سوف يستخدم I2P نفس تدفق الرسائل مثل BEP 15، لسهولة التبني في قواعد الكود العميلة التي تدعم UDP الحالية: من أجل الكفاءة، ولأسباب الأمان التي تم مناقشتها أدناه:

```
العميل                        المتعقب
    طلب الاتصال -------------->       (Datagram2 قابل للتكرار)
      <-------------- استجابة الاتصال.   (خام)
    طلب الإعلان -------------->      (Datagram3 قابل للتكرار)
      <-------------- استجابة الإعلان.  (خام)
    طلب الإعلان -------------->      (Datagram3 قابل للتكرار)
      <-------------- استجابة الإعلان.  (خام)
             ...
```

هذا يوفر توفيرًا كبيرًا محتملًا في عرض النطاق الترددي مقارنة بالإعلانات المتدفقة (TCP). بينما Datagram2 بحجم مماثل لسيل SYN، يكون الرد الخام أصغر بكثير من سيل SYN ACK. تستخدم الطلبات اللاحقة Datagram3، وتكون الردود اللاحقة خام.

طلبات الإعلان هي Datagram3 حتى لا يحتاج المتعقب إلى الحفاظ على جدول تعيين كبير من معرفات الاتصال إلى وجهة الإعلان أو الهاش. بدلاً من ذلك، يمكن للمتعقب توليد معرفات الاتصال بشكل مشفر من هاش المرسل، الطابع الزمني الحالي (استنادًا إلى بعض الفواصل)، وقيمة سرية. عندما يتم تلقي طلب إعلان، يقوم المتعقب بالتحقق من صحة معرف الاتصال، ثم يستخدم هاش المرسل Datagram3 كهدف للرسالة.

### دعم المتعقب/العميل

بالنسبة لتطبيق متكامل (راوتر وعميل في عملية واحدة، على سبيل المثال i2psnark، وملحق ZzzOT جافا)، أو لتطبيق مستند إلى I2CP (على سبيل المثال BiglyBT)، يجب أن يكون من السهل تنفيذ وتوجيه الترافيك المتدفق وحركة حزم البيانات بشكل منفصل. من المتوقع أن يكون ZzzOT و i2psnark أول متعقب وعميل ينفذ هذا الاقتراح.

التطبيقات غير المتكاملة للمتعقبين والعملاء تمت مناقشتها أدناه.

المتعقبون
````````

هناك أربعة تطبيقات متعقب I2P معروفة:

- zzzot, ملحق جافا متكامل، يعمل في opentracker.dg2.i2p والعديد من المواقع الأخرى
- tracker2.postman.i2p, يعمل على الأرجح خلف راوتر جافا ونفق خادم HTTP
- المتعقب السابق C opentracker, الذي تم تعديله عن طريق zzz، مع دعم UDP معلق
- المتعقب الجديد C opentracker, الذي تم تعديله عن طريق r4sas، يعمل في opentracker.r4sas.i2p وربما في مواقع أخرى، يعمل على الأرجح خلف راوتر i2pd ونفق خادم HTTP

بالنسبة لتطبيق متعقب خارجي يستخدم حاليًا نفق خادم HTTP لتلقي طلبات الإعلان، يمكن أن يكون التنفيذ صعبًا. يمكن تطوير نفق متخصص لترجمة حزم البيانات إلى طلبات/ردود HTTP محلية. أو، يمكن تصميم نفق متخصص يتعامل مع كل من طلبات HTTP وحزم البيانات ويمكنه توجيه حزم البيانات إلى العملية الخارجية. هذه القرارات التصميمية ستعتمد بشدة على التنفيذات الخاصة بالراوتر وتنفيذات المتعقب، وهي خارج نطاق هذا الاقتراح.

العملاء
```````
تتطلب عملاء التورنت الخارجية المستندة إلى SAM مثل qbittorrent والعملاء الآخرين المستندين إلى libtorrent  SAM v3.3 [/en/docs/api/samv3/](/en/docs/api/samv3/) الذي لا يدعمه i2pd. هذا مطلوب أيضًا لدعم DHT، وهو معقد بدرجة كافية لأن لا يوجد عميل تورنت يعتمد على SAM قد نفذه. لا يتوقع أي تنفيذات تعتمد على SAM لهذا الاقتراح في الوقت القريب.

### مدة الاتصال

[BEP 15](http://www.bittorrent.org/beps/bep_0015.html) يحدد أن معرف الاتصال ينتهي في دقيقة واحدة في العميل، وفي دقيقتين في المتعقب. لا يمكن تكوينه. ذلك يحد من الكفاءة المحتملة، إلا إذا قامت العملاء بتجميع الإعلانات لتنفيذها جميعًا في إطار زمني مدته دقيقة واحدة. i2psnark لا يقوم حاليًا بتجميع الإعلانات؛ بل يوزعها لتفادي تدفقات الترافيك. يتم الإبلاغ عن مستخدمين متقدمين بتشغيل الآلاف من التورنت في وقت واحد، واندفاع هذا العدد الكبير من الإعلانات في دقيقة واحدة غير واقعي.

هنا، نحن نقترح تمديد استجابة الاتصال لإضافة حقل مدى عمر معرف الاتصال. الافتراضي، إذا لم يكن موجودًا، هو دقيقة واحدة. وإلا، فإن العمر المحدد بالثواني، سيتم استخدامه بواسطة العميل، وسيتولى المتعقب الحفاظ على معرف الاتصال لمدة دقيقة واحدة إضافية.

### التوافق مع BEP 15

هذا التصميم يحافظ على التوافق مع [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) قدر الإمكان للحد من التغييرات المطلوبة في العملاء والمتعقبين الحاليين.

التغيير الوحيد المطلوب هو تنسيق معلومات النظراء في استجابة الإعلان. إضافة حقل العمر في استجابة الاتصال ليست مطلوبة ولكنها موصى بها بشدة للكفاءة، كما هو موضح أعلاه.

### تحليل الأمان

أحد الأهداف المهمة لبروتوكول الإعلان عبر UDP هو منع انتحال العنوان. يجب أن يكون العميل موجودًا فعليًا ويمتلك مجموعة تأجير حقيقية. يجب أن يكون لديه أنفاق واردة لتلقي استجابة الاتصال. يمكن أن تكون هذه الأنفاق صفراً وتبني فورًا، ولكن ذلك سيكشف عن الجهة المنشئة. يحقق هذا البروتوكول ذلك الهدف.

### القضايا

- هذا الاقتراح لا يدعم الوجهات المظلمة، ولكنه يمكن توسيعه ليشملها. انظر أدناه.

## المواصفات

### البروتوكولات والمنافذ

Datagram2 القابل للتكرار يستخدم بروتوكول I2CP رقم 19؛
Datagram3 القابل للتكرار يستخدم بروتوكول I2CP رقم 20؛
حزم البيانات الخام تستخدم بروتوكول I2CP رقم 18.
طلبات قد تكون Datagram2 أو Datagram3. الردود دائمًا خام. تنسيق Datagram الأقدم القابل للتكرار ("Datagram1") يستخدم بروتوكول I2CP رقم 17 يجب أن لا يستخدم للطلبات أو الردود؛ يجب إسقاطها إذا تمت تلقيها على منافذ الطلب/الرد. لاحظ أن بروتوكول Datagram1 رقم 17 لا يزال مستخدمًا لبروتوكول DHT.

الطلبات تستخدم "منفذ إلى" I2CP من عنوان الإعلان؛ انظر أدناه.
"منفذ من" الطلب يتم اختياره من قبل العميل، ولكن يجب أن يكون غير صفري، ومنفذًا مختلفًا عن المستخدمين من قبل DHT، حتى يمكن تصنيف الردود بسهولة. يجب على المتعقبين رفض الطلبات المستلمة على منفذ خاطئ.

الردود تستخدم "منفذ إلى" I2CP من الطلب.
"منفذ من" الطلب هو "منفذ إلى" من الطلب.

### عنوان الإعلان

صيغة عنوان الإعلان غير محددة في [BEP 15](http://www.bittorrent.org/beps/bep_0015.html), ولكن كما في الإنترنت الواضح، تكون عناوين الإعلان UDP بحجم "udp://host:port/path". يتم تجاهل المسار وقد يكون فارغًا، ولكن عادةً ما يكون "/announce" على الإنترنت الواضح. يجب دائمًا أن يكون جزء ":port" حاضرًا، ومع ذلك، إذا تم حذف جزء ":port"، استخدم المنفذ الافتراضي I2CP وهو 6969، لأن ذلك هو المنفذ الشائع على الإنترنت الواضح. قد يكون هناك أيضًا معلمات cgi مرفقة &a=b&c=d، يمكن معالجتها وتوفيرها في طلب الإعلان، انظر [BEP 41](http://www.bittorrent.org/beps/bep_0041.html). إذا لم يكن هناك معلمات أو مسار، فقد يتم حذف الجزء /. كما هو مفهوم في [BEP 41](http://www.bittorrent.org/beps/bep_0041.html)

### تنسيقات Datagram

جميع القيم تُرسل بترتيب البايت الصافي (big endian).
لا تتوقع أن الحزم تكون بحجم معين.
يمكن أن تزيد التمديدات المستقبلية من حجم الحزم.

طلب الاتصال
```````````````

من العميل إلى المتعقب.
16 بايت. يجب أن تكون Datagram2 قابلة للتكرار. نفس ما في [BEP 15](http://www.bittorrent.org/beps/bep_0015.html). لا توجد تغييرات.

```
الانحراف  حجم            الاسم            القيمة
  0       64-bit integer  protocol_id     0x41727101980 // ثابت سحر
  8       32-bit integer  action          0 // اتصال
  12      32-bit integer  transaction_id
```

استجابة الاتصال
````````````````

من المتعقب إلى العميل.
16 أو 18 بايت. يجب أن تكون خام. نفس ما في [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) باستثناء ما هو مذكور أدناه.

```
الانحراف  حجم            الاسم            القيمة
  0       32-bit integer  action          0 // اتصال
  4       32-bit integer  transaction_id
  8       64-bit integer  connection_id
  16      16-bit integer  lifetime        اختياري  // تغيير من BEP 15
```

يجب إرسال الاستجابة إلى "منفذ إلى" I2CP الذي تم استلامه كـ "منفذ من" للطلب.

حقل العمر اختياري ويشير إلى مدى عمر معرف الاتصال للعميل بالثواني. الافتراضي هو 60، والحد الأدنى إذا كان محددًا هو 60. الحد الأقصى هو 65535 أو حوالي 18 ساعة. يجب على المتعقب الاحتفاظ بمعرف الاتصال لمدة 60 ثانية أكثر من عمر العميل.

طلب الإعلان
``````````````

من العميل إلى المتعقب.
98 بايت على الأقل. يجب أن تكون Datagram3 قابلة للتكرار. نفس ما في [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) باستثناء ما هو مذكور أدناه.

معرف الاتصال كما تم استلامه في استجابة الاتصال.

```
الانحراف  حجم            الاسم            القيمة
  0       64-bit integer  connection_id
  8       32-bit integer  action          1     // إعلان
  12      32-bit integer  transaction_id
  16      20-byte string  info_hash
  36      20-byte string  peer_id
  56      64-bit integer  downloaded
  64      64-bit integer  left
  72      64-bit integer  uploaded
  80      32-bit integer  event           0     // 0: لا شيء؛ 1: مكتمل؛ 2: بدأ؛ 3: توقف
  84      32-bit integer  IP address      0     // افتراضي
  88      32-bit integer  key
  92      32-bit integer  num_want        -1    // افتراضي
  96      16-bit integer  port
  98      varies          options     اختياري  // كما هو محدد في BEP 41
```

التغييرات من [BEP 15](http://www.bittorrent.org/beps/bep_0015.html):

- الكي يتجاهل
- ربما يتم تجاهل المنفذ
- قسم الخيارات، إذا كان موجودًا، هو كما هو محدد في [BEP 41](http://www.bittorrent.org/beps/bep_0041.html)

يجب إرسال الاستجابة إلى "منفذ إلى" I2CP الذي تم استلامه كـ "منفذ من" للطلب. لا تستخدم المنفذ من طلب الإعلان.

استجابة الإعلان
```````````````

من المتعقب إلى العميل.
20 بايت على الأقل. يجب أن تكون خام. نفس ما في [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) باستثناء ما هو مذكور أدناه.

```
الانحراف  حجم            الاسم            القيمة
  0           32-bit integer  action          1 // إعلان
  4           32-bit integer  transaction_id
  8           32-bit integer  interval
  12          32-bit integer  leechers
  16          32-bit integer  seeders
  20   32 * n 32-byte hash    binary hashes     // تغيير من BEP 15
  ...                                           // تغيير من BEP 15
```

التغييرات من [BEP 15](http://www.bittorrent.org/beps/bep_0015.html):

- بدلاً من 6-byte IPv4+port أو 18-byte IPv6+port، نعيد تعدد من 32-byte "استجابات مضغوطة" مع هاشات النظراء SHA-256.
  كما هو الحال مع استجابات TCP المضغوطة، لا ندرج منفذًا.

يجب إرسال الاستجابة إلى "منفذ إلى" I2CP الذي تم استلامه كـ "منفذ من" للطلب. لا تستخدم المنفذ من طلب الإعلان.

حزم البيانات في I2P لها حجم أقصى كبير جدًا يصل إلى حوالي 64 كيلو بايت؛ ومع ذلك، لتحقيق التسليم الموثوق، يجب تجنب حزم البيانات التي تزيد عن 4 كيلو بايت. لأجل كفاءة عرض النطاق الترددي، يجب أن تحد المتعقبين بشكل عام من الحد الأقصى لعدد النظراء إلى حوالي 50، وهو ما يتوافق مع حزمة بحجم حوالي 1600 بايت قبل النفقات العامة على مختلف الطبقات، ويجب أن يكون ضمن حد الحمولة الرسائل النفقية في كلتا الحالتين بعد التجزئة.

كما هو الحال في BEP 15، لا يوجد عداد مضمن لعدد عناوين النظراء (IP/المنفذ لـ BEP 15، هاش هنا) للتتبع. بينما لا يمكن التفكير في ذلك في BEP 15، يمكن تعريف مؤشر اكتمال النظراء من خلال جميع الأصفار للإشارة إلى أن معلومات النظراء مكتملة وبعض بيانات التمديد تتبع.

حتى يكون التمديد ممكنًا في المستقبل، يجب أن يتجاهل العملاء هاشًا مكونًا من 32 بايتًا جميعها أصفار، وأي بيانات تليها. يجب على المتعقب أن يرفض الإعلانات من هاش جميعه أصفار، على الرغم من أن هذا الهاش محظور بالفعل بواسطة راوترات جافا.

Scrape
``````

طلب/استجابة Scrape من [BEP 15](http://www.bittorrent.org/beps/bep_0015.html) لا يُطلب من هذا الاقتراح، ولكن يمكن تنفيذه إذا كان مطلوبًا، لا توجد تغييرات مطلوبة. يجب على العميل الحصول على معرف اتصال أولاً. طلب scrape يكون دائمًا Datagram3 قابل للتكرار. الاستجابة scrape تكون دائمًا خام.

استجابة الخطأ
````````````

من المتعقب إلى العميل.
8 بايت على الأقل (إذا كانت الرسالة فارغة).
يجب أن تكون خام. نفس ما في [BEP 15](http://www.bittorrent.org/beps/bep_0015.html). لا تغييرات.

```
الانحراف  حجم            الاسم            القيمة
  0       32-bit integer  action          3 // خطأ
  4       32-bit integer  transaction_id
  8       string          الرسالة
```

## الامتدادات

البتات الامتداد أو حقل النسخة غير مضمن.
يجب ألا يفترض العملاء والمتعقبون أن الحزم تكون بحجم معين.
بهذه الطريقة، يمكن إضافة الحقول الجديدة دون كسر التوافق.
يوصى بشدة باستخدام تنسيق الامتدادات المحدد في [BEP 41](http://www.bittorrent.org/beps/bep_0041.html) إذا لزم الأمر.

تم تعديل استجابة الاتصال لإضافة حقل عمر معرف الاتصال الاختياري.

إذا كان دعم الوجهات المظلمة مطلوبًا، يمكننا إما إضافة العنوان المظلل 35 بايت في نهاية طلب الإعلان، أو طلب هشات مظللة في الاستجابات، باستخدام تنسيق [BEP 41](http://www.bittorrent.org/beps/bep_0041.html) (المعالمات التي لم تحدد بعد). يمكن أن يضاف مجموعة العناوين المظلمة الحاملة لـ 35 بايت غير القابلة للشفافية إلى نهاية رد الإعلان، بعد هاش جميعه أصفار 32 بايت.

## إرشادات التنفيذ

انظر قسم التصميم أعلاه لمناقشة التحديات أمام العملاء والمتعقبين غير المتكاملين.

### العملاء

بالنسبة لاسم المتعقب المحدد، يجب على العميل تفضيل عناوين UDP على عناوين HTTP، ويجب ألا يعلن لكليهما.

يجب أن تتطلب العملاء الذين لديهم دعم حالي لـ BEP 15 تعديلات صغيرة فقط.

إذا دعم العميل DHT أو بروتوكولات حزم بيانات أخرى، فمن المحتمل أن يختار منفذًا مختلفًا كـ "منفذ من" للطلب حتى تأتي الردود إلى ذلك المنفذ ولا تتداخل مع رسائل DHT. العميل يتلقى فقط datagrams خام كـ ردود. لن يرسل المتعقبون أبدًا datagram2 القابل للتكرار إلى العميل.

يجب على العملاء الذين لديهم قائمة افتراضية من المتعقبين المفتوحين أن يحدثوا القائمة لإضافة عناوين UDP بعد أن يتم التحقق من المتعقبين المعروفين لدعم UDP.

يمكن أن تقوم العملاء بتنفيذ إعادة الإرسال للطلبات أو لا. يمكن لعملاء إعادة الإرسال، إذا تم تنفيذها، أن تستخدم مهلة ابتدائية لا تقل عن 15 ثانية، ومضاعفة المهلة لكل إعادة إرسال (التراجع الأسي).

يجب على العملاء التراجع بعد تلقي استجابة خطأ.

### المتعقبون

يجب أن تتطلب المتعقبون الذين لديهم دعم حالي لـ BEP 15 تعديلات صغيرة فقط.
يختلف هذا الاقتراح عن اقتراح 2014، حيث يجب على المتعقب أن يدعم استقبال datagram2 و datagram3 القابلة للتكرار على نفس المنفذ.

للتقليل من متطلبات الموارد على المتعقب، تم تصميم هذا البروتوكول لإزالة أي مطالب على المتعقب بتخزين تعيينات من معرفات العملاء إلى معرفات الاتصال للتحقق لاحقًا. هذا ممكن لأن حزمة طلب الإعلان هي حزمة Datagram3 القابلة للتكرار، لذا تحتوي على هاش المرسل.

تتمثل التنفيذ الموصى به في:

- تعريف الحقبة الحالية كوقت الراهن مع دقة مدى عمر الاتصال الذي تم حله، ``epoch = now / lifetime``.
- تعريف وظيفة هاش مشفر ``H(secret, clienthash, epoch)`` تولد مخرجات 8 بايت.
- توليد السر الثابت المستخدم لجميع الاتصالات.
- لمعالجهات الاتصال، حساب ``connection_id = H(secret,  clienthash, epoch)``
- لطلبات الإعلان، التحقق من معرف الاتصال المستلم في الحقبة الحالية من خلال التحقق من ``connection_id == H(secret, clienthash, epoch) || connection_id == H(secret, clienthash, epoch - 1)``

## الانتقال

العملاء الحاليون لا يدعمون عناوين إعلان UDP ويتجاهلونهم.

المتعقبون الحاليون لا يدعمون استقبال datagrams القابلة للتكرار أو الخام، سيتم إسقاطها.

هذا الاقتراح اختياري بالكامل. لا يُطلب من العملاء أو المتعقبين تنفيذه في أي وقت.

## التنفيذ

من المتوقع أن تكون أولى التنفيذات في ZzzOT و i2psnark. سيتم استخدامها للاختبار والتحقق من هذا الاقتراح.

ستتبع التنفيذات الأخرى حسب الرغبة بعد اكتمال الاختبار والتحقق.

