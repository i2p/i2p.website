---
title: "اختبار الأقران لـ IPv6"
number: "126"
author: "zzz"
created: "2016-05-02"
lastupdated: "2018-03-19"
status: "مغلق"
thread: "http://zzz.i2p/topics/2119"
target: "0.9.27"
implementedin: "0.9.27"
---

## نظرة عامة

تهدف هذه المقترح إلى تنفيذ اختبار الأقران SSU لـ IPv6. تم تنفيذه في 0.9.27.


## الدافع

لا يمكننا تحديد وتتبع بشكل موثوق إذا كان عنوان IPv6 الخاص بنا مغلقًا بجدار ناري.

عندما أضفنا دعم IPv6 منذ سنوات، افترضنا أن IPv6 لم يكن مغلقًا بجدار ناري.

مؤخرًا، في الإصدار 0.9.20 (مايو 2015)، قمنا بتقسيم حالة الاتصال v4/v6 داخليًا (التذكرة #1458).
راجع تلك التذكرة للحصول على معلومات شاملة وروابط.

إذا كان لديك كلتا v4 وv6 مغلقتين بجدار ناري، يمكنك فقط إجبار الإغلاق في قسم تكوين TCP على /confignet.

ليس لدينا اختبار أقران لـ v6. إنه محظور في مواصفات SSU.
إذا لم نتمكن من اختبار قابلية وصول v6 بانتظام، فلا يمكننا الانتقال بذكاء من/إلى حالة الاتصال الآمن v6.
ما يُترك لنا هو التخمين بأننا متصلون إذا حصلنا على اتصال وارد،
والتخمين بأننا غير متصلين إذا لم نحصل على اتصال وارد لفترة.
المشكلة هي أنه بمجرد أن تعلن عن عدم الاتصال، لن تنشر عنوان IP v6 الخاص بك،
ولن تحصل على أي أخرى (بعد انتهاء صلاحية RI في قاعدة بيانات الشبكة للجميع).


## التصميم

تنفيذ اختبار الأقران لـ IPv6،
عن طريق إزالة القيود السابقة بأن اختبار الأقران كان مسموحًا فقط لـ IPv4.
رسالة اختبار الأقران لديها بالفعل حقل لطول IP.


## المواصفات

في قسم القدرات في نظرة عامة على SSU، قم بإضافة التعديل التالي:

حتى الإصدار 0.9.26، لم يكن اختبار الأقران مدعومًا لعناوين IPv6، و
يجب تجاهل القدرة "B" إذا كانت موجودة لعناوين IPv6.
اعتبارًا من الإصدار 0.9.27، يتم دعم اختبار الأقران لعناوين IPv6، و
وجود أو عدم وجود القدرة "B" في عنوان IPv6
يدل على الدعم الفعلي (أو عدم الدعم).


في أقسام اختبار الأقران في نظرة عامة على SSU وSSU المواصفة، قم بإجراء التعديلات التالية:

ملاحظات IPv6:
حتى الإصدار 0.9.26، يتم دعم اختبار عناوين IPv4 فقط.
لذلك، يجب أن تكون كل الاتصالات بين Alice-Bob وAlice-Charlie عبر IPv4.
بينما يمكن أن تكون اتصالات Bob-Charlie عبر IPv4 أو IPv6.
يجب أن يكون عنوان Alice، عند تحديده في رسالة PeerTest، 4 بايت.
اعتبارًا من الإصدار 0.9.27، يتم دعم اختبار عناوين IPv6، ويمكن أن تكون اتصالات Alice-Bob وAlice-Charlie عبر IPv6،
إذا أشار Bob وCharlie إلى دعمهما بقدرة "B" في عناوين IPv6 المنشورة الخاصة بهما.

ترسل Alice الطلب إلى Bob باستخدام جلسة موجودة عبر النقل (IPv4 أو IPv6) الذي ترغب في اختباره.
عندما يتلقى Bob طلبًا من Alice عبر IPv4، يجب على Bob اختيار Charlie الذي يعلن عن عنوان IPv4.
عندما يتلقى Bob طلبًا من Alice عبر IPv6، يجب على Bob اختيار Charlie الذي يعلن عن عنوان IPv6.
يمكن أن تكون اتصالات Bob-Charlie الفعلية عبر IPv4 أو IPv6 (أي مستقلة عن نوع عنوان Alice).


## الترحيل

يمكن لأجهزة التوجيه إما:

1) عدم زيادة إصدارها إلى 0.9.27 أو أعلى

2) إزالة القدرة "B" من أي عناوين SSU IPv6 منشورة

3) تنفيذ اختبار الأقران لـ IPv6
