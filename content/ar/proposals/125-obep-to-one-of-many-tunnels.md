---
title: "تسليم OBEP إلى أنفاق 1-of-N أو N-of-N"
number: "125"
author: "zzz، str4d"
created: "2016-03-10"
lastupdated: "2017-04-07"
status: "مفتوح"
thread: "http://zzz.i2p/topics/2099"
toc: true
---

## نظرة عامة

يغطي هذا الاقتراح تحسينين لتحسين أداء الشبكة:

- تفويض اختيار IBGW إلى OBEP بتزويده بقائمة من الخيارات البديلة بدلاً من خيار واحد.

- تمكين توجيه الحزم المتعددة عند OBEP.

## الدافع

في حالة الاتصال المباشر، تتمثل الفكرة في تقليل الازدحام في الاتصال، من خلال إعطاء OBEP المرونة في كيفية اتصاله بـ IBGWs. تتيح القدرة على تحديد أنفاق متعددة لنا تنفيذ البث المتعدد عند OBEP (عن طريق تسليم الرسالة إلى جميع الأنفاق المحددة).

يمكن أن يكون البديل لجزء التفويض من هذا الاقتراح هو الإرسال عبر تجزئة [LeaseSet]، مشابه للقدرة الحالية على تحديد تجزئة [RouterIdentity] مستهدف. سينتج عن ذلك رسالة أصغر وربما LeaseSet أحدث. ومع ذلك:

1. سيتطلب من OBEP إجراء بحث

2. قد لا يتم نشر LeaseSet على حد الحشو، لذا سيفشل البحث.

3. قد يكون LeaseSet مشفرًا، لذا لن يتمكن OBEP من الحصول على التراخيص.

4. تحديد LeaseSet يكشف لـ OBEP عن [الوجهة] للرسالة، والتي يمكنهم اكتشافها فقط بخلاف ذلك عن طريق جمع جميع مجموعات Leases في الشبكة والبحث عن مطابقة.

## التصميم

سيضع المنشئ (OBGW) بعض (أو جميع؟) [Leases] المستهدفة في تعليمات التسليم [TUNNEL-DELIVERY] بدلاً من اختيار واحدة فقط.

سيختار OBEP أحد تلك لتحقيق التسليم. سيختار OBEP، إذا كان متاحًا، واحدًا يتصل به فعليًا أو يعرفه بالفعل. سيجعل هذا مسار OBEP-IBGW أسرع وأكثر موثوقية، ويقلل من الاتصالات في الشبكة بشكل عام.

لدينا نوع تسليم غير مستخدم (0x03) وبقيت بتان (0 و 1) في الأعلام لـ [TUNNEL-DELIVERY] التي يمكننا الاستفادة منها لتنفيذ هذه الميزات.

## تداعيات الأمان

لا يغير هذا الاقتراح مقدار المعلومات التي يتم تسريبها حول الوجهة المستهدفة لـ OBGW أو رؤيتهم لـ NetDB:

- يمكن لمنافس يتحكم في OBEP ويقوم بجمع مجموعات Leases من NetDB معرفة ما إذا كانت الرسالة تُرسل إلى وجهة معينة، من خلال البحث عن زوج [TunnelId] / [RouterIdentity]. في أسوأ الأحوال، قد يجعل وجود تراخيص متعددة في TMDI من السهل العثور على تطابق في قاعدة بيانات الخصم.

- يمكن لمنافس يقوم بتشغيل وجهة خبيثة الحصول بالفعل على معلومات حول رؤية ضحية متصلة لـ NetDB، عن طريق نشر مجموعات Leases تحتوي على أنفاق واردة مختلفة إلى مراكز فيضانات مختلفة، ومراقبة الأنفاق التي يتصل بها OBGW. من وجهة نظرهم، فإن OBEP الذي يختار النفق الذي سيتم استخدامه هو عملياً مماثل للاختيار الذي يقوم به OBGW.

يعرض علم البث المتعدد حقيقة أن OBGW يجري البث المتعدد إلى OBEPs. يخلق هذا توازنًا بين الأداء والخصوصية الذي ينبغي مراعاته عند تنفيذ بروتوكولات ذات مستوى أعلى. كعلم اختياري، يمكن للمستخدمين اتخاذ القرار المناسب لتطبيقهم. قد يكون هناك فوائد لأن يكون هذا هو السلوك الافتراضي للتطبيقات المتوافقة، ومع ذلك، حيث إن الاستخدام الواسع من قبل مجموعة متنوعة من التطبيقات سيقلل من تسرب المعلومات عن التطبيق المحدد الذي جاءت منه الرسالة.

## المواصفات

سيتم تعديل تعليمات تسليم القطعة الأولى [TUNNEL-DELIVERY] كما يلي:

```
+----+----+----+----+----+----+----+----+
|flag|  معرف النفق (اختياري)  |              |
+----+----+----+----+----+              +
|                                       |
+                                       +
|         التجزئة إلى (اختياري)            |
+                                       +
|                                       |
+                        +----+----+----+
|                        |dly | الرسالة  
+----+----+----+----+----+----+----+----+
 معرف الرسالة (اختياري) | خيارات موسعة (اختياري) | عدد | (اختياري)
+----+----+----+----+----+----+----+----+
 معرف النفق N   |                        |
+----+----+----+                        +
|                                       |
+                                       +
|         التجزئة إلى N (اختياري)          |
+                                       +
|                                       |
+              +----+----+----+----+----+
|              | معرف النفق N+1 (اختياري) |    |
+----+----+----+----+----+----+----+    +
|                                       |
+                                       +
|         التجزئة إلى N+1 (اختياري)        |
+                                       +
|                                       |
+                                  +----+
|                                  | الحجم
+----+----+----+----+----+----+----+----+
     |
+----+

العلم ::
       1 بايت
       ترتيب البتات: 76543210
       البتات 6-5: نوع التسليم
                 0x03 = الأنفاق
       البت 0: البث المتعدد؟ إذا كانت 0، سَلِّم لإحدى الأنفاق
                         إذا كانت 1، سَلِّم لجميع الأنفاق
                         اضبط على 0 للتوافق مع الاستخدامات المستقبلية إذا لم يكن نوع التسليم الأنفاق

العد ::
       1 بايت
       اختياري، موجود إذا كان نوع التسليم الأنفاق
       2-255 - عدد أزواج المعرف/التجزئة التي تلي

معرف النفق :: `TunnelId`
إلى التجزئة ::
       36 بايت لكل منها
       اختياري، موجود إذا كان نوع التسليم الأنفاق
       أزواج المعرف/التجزئة

الطول الإجمالي: الطول النموذجي هو:
       75 بايت للتسليم الأنفاق مع العد 2 (رسالة نفق غير مجزأة)؛
       79 بايت للتسليم الأنفاق مع العد 2 (القطعة الأولى)

بقية تعليمات التسليم دون تغيير
```

## التوافق

الأقران الوحيدون الذين يحتاجون لفهم المواصفات الجديدة هم OBGWs و OBEPs. يمكننا بالتالي جعل هذا التغيير متوافقًا مع الشبكة الحالية بجعل استخدامه مشروطاً بـ إصدار I2P المستهدف [VERSIONS](/docs/specs/i2np/#protocol-versions)

* يجب أن تختار OBGWs OBEPs المتوافقة عند بناء أنفاق صادرة، بناءً على إصدار I2P المعلن في [RouterInfo] الخاصة بهم.

* يجب أن يدعم الأقران الذين يعلنون الإصدار المستهدف تحليل الأعلام الجديدة، ويجب ألا يرفضوا التعليمات كغير صالحة.
