---
title: "2004-10-12자 I2P 상태 노트"
date: 2004-10-12
author: "jr"
description: "0.4.1.2 릴리스, 동적 스로틀링 실험, 0.4.2 스트리밍 라이브러리 개발, 그리고 이메일 논의를 다루는 주간 I2P 상태 업데이트"
categories: ["status"]
---

여러분, 주간 업데이트 시간입니다

## 색인:

1. 0.4.1.2
2. 0.4.1.3
3. 0.4.2
4. mail discussions
5. ???

## 1) 0.4.1.2

새로운 0.4.1.2 릴리스가 나온 지 며칠 되었고 전반적으로 예상대로 진행되고 있습니다 - 다만 새로운 watchdog 컴포넌트에서 몇 가지 문제가 있어, 재시작하는 대신 상황이 Bad(문제 상태)일 때 여러분의 router를 종료시켜 버리는 경우가 있었습니다. 오늘 앞서 언급했듯이, 저는 새로운 통계 로깅 도구를 사용해 저에게 일부 데이터를 보내 주실 분들을 찾고 있으니, 그에 대한 여러분의 도움이 매우 감사하겠습니다.

## 2) 0.4.1.3

0.4.2가 나오기 전에 한 번 더 릴리스를 할 예정입니다. 다음 단계로 넘어가기 전에 네트워크를 가능한 한 견고하게 만들고 싶기 때문입니다. 현재 실험 중인 것은 tunnel 참여에 대한 동적 스로틀로, 과부하 상태이거나 자신의 tunnel이 평소보다 느릴 때 요청을 확률적으로 거부하도록 router들에게 지시하는 방식입니다. 이러한 확률과 임계값은 수집 중인 통계로부터 동적으로 계산됩니다 — 10분 tunnel 테스트 시간이 60분 tunnel 테스트 시간보다 크다면, tunnel 요청을 60minRate/10minRate의 확률로 수락합니다(또한 현재 tunnel 수가 60분 평균 tunnel 수보다 많다면, p=60mRate/curTunnels로 수락합니다).

또 다른 잠재적인 제한 방법은 그런 취지로 대역폭을 평탄화하는 것입니다 - 대역폭 사용이 급증할 때 tunnels를 확률적으로 거부하는 것이죠. 어쨌든, 이러한 모든 조치의 의도는 네트워크 사용량을 분산시키고 tunnels를 더 많은 사람들에게 균형 있게 배치하는 데 있습니다. 우리가 부하 분산과 관련해 겪었던 주요 문제는 압도적인 *초과* 용량이었고, 그래서 우리의 "젠장, 우린 느리다, 거부하자" 트리거는 한 번도 발동되지 않았습니다. 이러한 새로운 확률적 방식들은 급격한 변화를 억제하는 데 도움이 되기를 바랍니다.

0.4.1.3 릴리스가 언제 나올지는 구체적으로 정해진 계획이 없습니다 — 아마 주말쯤일 수도 있습니다. 사람들이 보내주는 데이터(위에서 언급한)가 이것이 가치가 있는 일인지, 아니면 더 가치 있는 다른 방안이 있는지를 판단하는 데 도움이 될 것입니다.

## 3) 0.4.2

지난주 회의에서 논의한 대로, 0.4.2와 0.4.3 릴리스를 서로 바꾸었습니다 - 0.4.2는 새로운 스트리밍 라이브러리, 0.4.3은 tunnel 업데이트가 됩니다.

저는 TCP의 스트리밍 기능에 관한 문헌을 다시 검토하고 있는데, I2P와 관련해 고려해야 할 흥미로운 주제들이 몇 가지 보입니다. 구체적으로, 우리의 높은 왕복 시간(RTT) 특성은 XCP 같은 접근에 더 무게가 실리게 하며, 다양한 형태의 Explicit Congestion Notification(명시적 혼잡 알림, ECN)을 상당히 공격적으로 활용하는 편이 좋을 듯합니다. 다만 우리의 시계가 최대 1분까지 오차가 있을 수 있으므로 timestamp option(타임스탬프 옵션) 같은 것은 활용하기 어렵습니다.

또한, 짧은 수명의 연결을 처리하도록 streaming lib(스트리밍 라이브러리)를 최적화할 수 있는지 확인할 필요가 있다(일반적인 TCP는 이 부분을 거의 제대로 처리하지 못한다) - 예를 들어, 작은 (<32KB) HTTP GET 요청과 작은 (<32KB) 응답을 말 그대로 세 개의 메시지로 보낼 수 있기를 원한다:

```
Alice-->Bob: syn+data+close
Bob-->Alice: ack+data+close (the browser gets the response now)
Alice-->Bob: ack (so he doesn't resend the payload)
```
어쨌든 아직 이 작업에 대해 작성된 코드는 많지 않으며, 프로토콜 측면은 상당히 TCP와 유사해 보이고, 패킷은 human의 제안과 예전 제안을 어느 정도 합친 것처럼 보입니다. 제안이나 아이디어가 있거나 구현에 도움을 주고 싶으시다면, 연락 주시기 바랍니다.

## 4) 메일 논의

I2P 내부(및 외부)에서의 이메일과 관련해 흥미로운 논의가 몇 가지 있었습니다. postman이 온라인에 아이디어 모음을 공개하고 제안을 받고 있습니다. 또한 #mail.i2p에서 관련 논의가 있었습니다. postman에게 최신 업데이트를 요청해 볼 수 있을까요?

## 5) ???

일단은 여기까지입니다. 몇 분 뒤 회의에 잠깐 들러서 의견을 가져와 주세요 :)

=jr
