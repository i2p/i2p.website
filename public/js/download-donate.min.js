(function(){"use strict";const n=2,e="i2p_donated",s=30,l={btc:"bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh",xmr:"42ey1afDFnn4886T7196doS9GPMzexD9gXpsZYDwvtSX6X2DQpF6PvqGM7aXrDJhJXRDjTsHc1k6gkXqXjfj3tqyVKWxvvG",zec:"t1Hsc1LR8yKnbbe3twRp88p6vFfC5t7DLbs"};function o(){const e=new URLSearchParams(window.location.search);return{file:e.get("file")||"unknown",version:e.get("version")||"2.10.0",url:e.get("url")||"",platform:e.get("platform")||e.get("file")||"unknown"}}function i(){try{const t=localStorage.getItem(e);if(!t)return!1;const n=JSON.parse(t),s=new Date(n.expiry);return new Date<s}catch{return!1}}function a(){try{const t=new Date;t.setDate(t.getDate()+s),localStorage.setItem(e,JSON.stringify({expiry:t.toISOString(),timestamp:(new Date).toISOString()}))}catch{console.warn("Could not save donation status")}}function r(e){if(!e){console.error("[I2P Donate] No download URL provided");const e=document.getElementById("status-message");return e&&(e.innerHTML='<strong style="color: var(--color-error);">Error: Download URL missing</strong><br><small><a href="'+(document.referrer||"/downloads/")+'">← Return to downloads</a></small>'),!1}console.log("[I2P Donate] Starting download:",e);const t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t);const n=document.getElementById("status-message");return n&&(n.innerHTML=`<strong style="color: var(--color-success);">✓ Your download has started!</strong><br><small>If your download doesn't start, <a href="`+e+'" id="manual-download-link">click here</a>.</small>'),setTimeout(()=>{t.parentNode&&document.body.removeChild(t)},1e4),!0}function c(){console.log("[I2P Donate] Opening FundraiseUp donation form");const e=document.getElementById("donation-trigger");e&&e.click()}function t(){const e=o(),t=decodeURIComponent(e.url||"");console.log("[I2P Donate] Page loaded with params:",e),console.log("[I2P Donate] Download URL:",t);const s=r(t);if(!s){console.error("[I2P Donate] Download failed to start");return}if(i()){console.log("[I2P Donate] User donated recently, skipping donation form");return}setTimeout(()=>{c(),a()},n*1e3)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()})()