(function(){"use strict";const t="/en/donate/download/",s=!0;function o(){try{const e=localStorage.getItem("i2p_donated");if(!e)return!1;const t=JSON.parse(e),n=new Date(t.expiry);return new Date<n}catch{return!1}}function e(){if(!s||o()){console.log("[I2P Downloads] Interstitial disabled or user donated recently");return}console.log("[I2P Downloads] Intercepting download buttons..."),document.querySelectorAll(".btn-platform").forEach(e=>{if(e.classList.contains("intercepted"))return;const n=e.getAttribute("href");if(!n||n==="#"){console.log("[I2P Downloads] Skipping button with no href:",e);return}if(n.startsWith("/")||n.startsWith("http")&&n.includes("docker.com")){console.log("[I2P Downloads] Skipping internal/guide link:",n);return}console.log("[I2P Downloads] Intercepting button:",n),e.classList.add("intercepted"),e.addEventListener("click",function(e){e.preventDefault(),console.log("[I2P Downloads] Download button clicked!",n);const s=this.closest(".platform-card"),o=s?s.dataset.platform:"unknown",i=s?s.querySelector(".platform-version")?.textContent.trim():"";console.log("[I2P Downloads] Platform:",o,"Version:",i);const r=new URLSearchParams({file:o,version:i.replace("v",""),url:encodeURIComponent(n),platform:o}),a=`${t}?${r.toString()}`;console.log("[I2P Downloads] Redirecting to:",a),window.location.href=a})});const e=document.getElementById("detected-download-btn");if(e&&!e.classList.contains("intercepted")){const n=e.getAttribute("href");n&&n!=="#"&&(e.classList.add("intercepted"),e.addEventListener("click",function(e){e.preventDefault();const s=document.getElementById("detected-name")?.textContent||"unknown",o=document.getElementById("detected-details")?.textContent||"",i=o.match(/Version ([\d.]+)/)?.[1]||"2.10.0",a=new URLSearchParams({file:s.toLowerCase().replace("download for ",""),version:i,url:encodeURIComponent(n),platform:s});window.location.href=`${t}?${a.toString()}`}))}}function n(){console.log("[I2P Downloads] Script loaded and initializing..."),e(),setTimeout(()=>{console.log("[I2P Downloads] Re-checking buttons after 500ms..."),e()},500),setTimeout(()=>{console.log("[I2P Downloads] Re-checking buttons after 1000ms..."),e()},1e3),setTimeout(()=>{console.log("[I2P Downloads] Re-checking buttons after 1500ms..."),e()},1500)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})()